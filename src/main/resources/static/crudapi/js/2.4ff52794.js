(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"546f":function(e,t,n){"use strict";n("6426")},6426:function(e,t,n){},"713b":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-layout",{attrs:{view:"lHh Lpr lFf"}},[n("q-header",{staticClass:"bg-layoutcolor"},[n("q-toolbar",{staticClass:"text-white"},[n("q-btn",{attrs:{unelevated:"",flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu"},on:{click:function(t){e.leftDrawerOpen=!e.leftDrawerOpen}}}),n("q-btn",{directives:[{name:"show",rawName:"v-show",value:!0===e.isAllowBack,expression:"isAllowBack === true"}],attrs:{flat:"",dense:"",round:"",icon:"arrow_back_ios","aria-label":"Back"},on:{click:e.goBack}}),n("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"refresh","aria-label":"Refresh"},on:{click:e.refresh}}),n("q-space"),n("div",{staticClass:"q-px-md"},[n("a",{staticClass:"text-white",attrs:{target:"_blank",href:"https://crudapi.cn"}},[e._v("\n            crudapi官网\n          ")])]),n("div",{staticClass:"q-px-md"},[n("a",{staticClass:"text-white",attrs:{target:"_blank",href:"https://help.crudapi.cn"}},[e._v("\n            帮助文档\n          ")])]),n("div",{staticClass:"q-px-md"},[n("a",{staticClass:"text-white",attrs:{target:"_blank",href:"https://demo.crudapi.cn/swagger-ui.html"}},[e._v("\n            Swagger API\n          ")])]),n("div",{staticClass:"q-px-md"},[n("a",{staticClass:"text-white",attrs:{target:"_blank",href:"https://github.com/crudapi/crudapi-admin-web"}},[e._v("\n            Github源码\n          ")])]),n("div",{staticClass:"q-px-md"},[n("a",{staticClass:"text-white",attrs:{target:"_blank",href:"https://gitee.com/crudapi/crudapi-admin-web"}},[e._v("\n            Gitee源码\n          ")])]),n("q-btn",{staticClass:"q-mx-xs",attrs:{unelevated:"",label:e.userInfo.realname,flat:"","no-caps":"","icon-right":"arrow_drop_down"}},[n("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("div",{staticClass:"column bg-layoutcolor text-white profile-menu"},[n("q-item",{staticClass:"row items-center q-px-lg",attrs:{clickable:""},on:{click:e.logout}},[n("q-icon",{attrs:{name:"exit_to_app"}}),n("q-item-label",{staticClass:"q-pl-md menu-label"},[e._v("退出登录")])],1)],1)])],1)],1)],1),n("q-drawer",{attrs:{"show-if-above":"",width:200,breakpoint:600,"content-class":"bg-white"},model:{value:e.leftDrawerOpen,callback:function(t){e.leftDrawerOpen=t},expression:"leftDrawerOpen"}},[n("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"bg-layoutcolor text-white",staticStyle:{height:"50px",border:"1px #25272A solid",cursor:"pointer"},attrs:{clickable:""},on:{click:e.goHome}},[n("div",{staticClass:"text-center logo"},[n("div",{staticClass:"text-center"},[e._v("crudapi")])])]),n("q-tree",{ref:"qTreeProxy",attrs:{"selected-color":"primary",nodes:e.allMenu,selected:e.selected,"node-key":"labelKey","default-expand-all":"","no-connectors":""},on:{"update:selected":[function(t){e.selected=t},function(t){return e.onMenuClickAction()}]}})],1),n("q-page-container",[n("router-view")],1)],1)},s=[],i=n("c973"),r=n.n(i),l=(n("96cf"),n("b0c0"),n("a434"),n("8e44")),o={name:"MainLayout",computed:{userInfo:{get:function(){return this.$store.state.user.userInfo}},isAllowBack:{get:function(){return this.$store.state.config.isAllowBack}}},data:function(){return{leftDrawerOpen:!0,selected:null,metadataMenu:{label:"元数据",labelKey:"metadata",icon:"work_outline",children:[{label:"序列号",labelKey:"/metadata/sequences",icon:"format_list_numbered",children:[]},{label:"表",labelKey:"/metadata/tables",icon:"o_table_rows",children:[]},{label:"关系",labelKey:"/metadata/relations",icon:"content_copy",children:[]}]},businessMenu:{label:"业务数据",labelKey:"business",icon:"business",children:[]},systemBusinessMenu:{label:"内置数据",labelKey:"systemBusiness",icon:"tab",children:[]},systemMenu:{label:"系统",labelKey:"system",icon:"o_build",children:[{label:"设置",labelKey:"/setting",icon:"o_settings"},{label:"关于",labelKey:"/about",icon:"o_info"}]},allMenu:[]}},created:function(){this.$root.$on("updateMenuTree",this.updateMenuTreeCb),this.init()},mounted:function(){},activated:function(){},deactivated:function(){},updated:function(){},destroyed:function(){this.$root.$off("updateMenuTree",this.updateMenuTreeCb)},methods:{init:function(){var e=this;return r()(regeneratorRuntime.mark((function t(){var n,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.info("init"),t.prev=1,t.next=4,l["e"].list(1,9999);case 4:for(n=t.sent,a=0;a<n.length;a++)s=n[a],s.systemable?e.systemBusinessMenu.children.push({label:s.caption,labelKey:e.getBussinessPath(s.name),icon:"insert_chart_outlined"}):e.businessMenu.children.push({label:s.caption,labelKey:e.getBussinessPath(s.name),icon:"insert_chart_outlined"});e.allMenu.push(e.businessMenu),e.allMenu.push(e.systemBusinessMenu),e.allMenu.push(e.metadataMenu),e.allMenu.push(e.systemMenu),e.$refs.qTreeProxy.setExpanded("business",!0),e.$refs.qTreeProxy.setExpanded("systemBusiness",!0),e.$refs.qTreeProxy.setExpanded("metadata",!0),e.$refs.qTreeProxy.setExpanded("system",!0),t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](1),console.error(t.t0);case 19:case"end":return t.stop()}}),t,null,[[1,16]])})))()},updateMenu:function(){var e=this;return r()(regeneratorRuntime.mark((function t(){var n,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.info("updateMenu"),t.prev=1,e.businessMenu.children.splice(0,e.businessMenu.children.length),t.next=5,l["e"].list(1,9999);case 5:for(n=t.sent,a=0;a<n.length;a++)s=n[a],s.systemable||e.businessMenu.children.push({label:s.caption,labelKey:e.getBussinessPath(s.name),icon:"insert_chart_outlined"});t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](1),console.error(t.t0),e.$q.notify(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))()},updateMenuTreeCb:function(){this.updateMenu()},getBussinessPath:function(e){return"/business/"+e},getTablePath:function(e){return"/metadata/tables/"+e},getSequencePath:function(e){return"/metadata/sequences/"+e},onMenuClickAction:function(){console.info("onMenuClickAction"),this.selected&&this.selected&&0===this.selected.indexOf("/")&&(this.$router.currentRoute.fullPath!==this.selected?(console.info("onMenuClickAction push"+this.selected),this.$router.push(this.selected)):console.info("onMenuClickAction skip"))},refresh:function(){window.location.reload(!0)},goBack:function(){this.$router.go(-1)},goHome:function(){this.$router.push("/")},logout:function(){var e=this;this.$store.dispatch("user/logout").then(r()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push("/login");case 1:case"end":return t.stop()}}),t)})))).catch((function(e){console.error(e)}))}}},c=o,u=(n("546f"),n("2877")),d=n("4d5a"),h=n("e359"),p=n("65c6"),b=n("9c40"),f=n("2c91"),m=n("4e73"),w=n("66e5"),g=n("0016"),v=n("0170"),x=n("9404"),y=n("7f41"),k=n("09e3"),M=n("714f"),_=n("eebe"),q=n.n(_),C=Object(u["a"])(c,a,s,!1,null,null,null);t["default"]=C.exports;q()(C,"components",{QLayout:d["a"],QHeader:h["a"],QToolbar:p["a"],QBtn:b["a"],QSpace:f["a"],QMenu:m["a"],QItem:w["a"],QIcon:g["a"],QItemLabel:v["a"],QDrawer:x["a"],QTree:y["a"],QPageContainer:k["a"]}),q()(C,"directives",{Ripple:M["a"]})}}]);