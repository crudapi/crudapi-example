(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"546f":function(e,t,a){"use strict";a("6426")},6426:function(e,t,a){},"713b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-layout",{attrs:{view:"lHh Lpr lFf"}},[a("q-header",{staticClass:"bg-layoutcolor"},[a("q-toolbar",{staticClass:"text-white"},[a("q-btn",{attrs:{unelevated:"",flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu"},on:{click:function(t){e.leftDrawerOpen=!e.leftDrawerOpen}}}),a("q-btn",{directives:[{name:"show",rawName:"v-show",value:!0===e.isAllowBack,expression:"isAllowBack === true"}],attrs:{flat:"",dense:"",round:"",icon:"arrow_back_ios","aria-label":"Back"},on:{click:e.goBack}}),a("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"refresh","aria-label":"Refresh"},on:{click:e.refresh}}),a("q-space"),a("div",{staticClass:"q-px-md"},[a("a",{staticClass:"text-white",attrs:{target:"_blank",href:"https://crudapi.cn"}},[e._v("\n            官网\n          ")])]),a("q-btn",{staticClass:"q-mx-xs",attrs:{unelevated:"",label:"帮助",flat:"","no-caps":"","icon-right":"help_outline"}},[a("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("div",{staticClass:"column bg-layoutcolor text-white profile-menu"},[a("a",{staticClass:"text-white",attrs:{target:"_blank",href:"https://help.crudapi.cn"}},[a("q-item",{staticClass:"row items-center q-px-lg",attrs:{clickable:""}},[a("q-icon",{attrs:{name:"article"}}),a("q-item-label",{staticClass:"q-pl-md menu-label"},[e._v("文档")])],1)],1),a("a",{staticClass:"text-white",attrs:{target:"_blank",href:"https://demo.crudapi.cn/swagger-ui.html"}},[a("q-item",{staticClass:"row items-center q-px-lg",attrs:{clickable:""}},[a("q-icon",{attrs:{name:"api"}}),a("q-item-label",{staticClass:"q-pl-md menu-label"},[e._v("Swagger API")])],1)],1),a("a",{staticClass:"text-white",attrs:{href:"/crudapi/about"}},[a("q-item",{staticClass:"row items-center q-px-lg",attrs:{clickable:""}},[a("q-icon",{attrs:{name:"contact_support"}}),a("q-item-label",{staticClass:"q-pl-md menu-label"},[e._v("联系我们")])],1)],1)])])],1),a("q-btn",{staticClass:"q-mx-xs",attrs:{unelevated:"",label:"源码",flat:"","no-caps":"","icon-right":"code"}},[a("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("div",{staticClass:"column bg-layoutcolor text-white profile-menu"},[a("a",{staticClass:"text-white",attrs:{target:"_blank",href:"https://gitee.com/crudapi/crudapi-admin-web"}},[a("q-item",{staticClass:"row items-center q-px-lg",attrs:{clickable:""}},[a("q-icon",{attrs:{name:"code"}}),a("q-item-label",{staticClass:"q-pl-md menu-label"},[e._v("Gitee")])],1)],1),a("a",{staticClass:"text-white",attrs:{target:"_blank",href:"https://github.com/crudapi/crudapi-admin-web"}},[a("q-item",{staticClass:"row items-center q-px-lg",attrs:{clickable:""}},[a("q-icon",{attrs:{name:"code"}}),a("q-item-label",{staticClass:"q-pl-md menu-label"},[e._v("Github")])],1)],1)])])],1),a("q-btn",{staticClass:"q-mx-xs",attrs:{unelevated:"",label:e.userInfo.realname,flat:"","no-caps":"","icon-right":"arrow_drop_down"}},[a("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("div",{staticClass:"column bg-layoutcolor text-white profile-menu"},[a("q-item",{staticClass:"row items-center q-px-lg",attrs:{clickable:""},on:{click:e.logout}},[a("q-icon",{attrs:{name:"exit_to_app"}}),a("q-item-label",{staticClass:"q-pl-md menu-label"},[e._v("退出登录")])],1)],1)])],1)],1)],1),a("q-drawer",{attrs:{"show-if-above":"",width:200,breakpoint:600,"content-class":"bg-white"},model:{value:e.leftDrawerOpen,callback:function(t){e.leftDrawerOpen=t},expression:"leftDrawerOpen"}},[a("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"bg-layoutcolor text-white",staticStyle:{height:"50px",border:"1px #25272A solid",cursor:"pointer"},attrs:{clickable:""},on:{click:e.goHome}},[a("div",{staticClass:"text-center logo"},[a("div",{staticClass:"text-center"},[e._v("crudapi")])])]),a("q-tree",{ref:"qTreeProxy",attrs:{"selected-color":"primary",nodes:e.allMenu,selected:e.selected,"node-key":"labelKey","default-expand-all":"","no-connectors":""},on:{"update:selected":[function(t){e.selected=t},function(t){return e.onMenuClickAction()}]}})],1),a("q-page-container",[a("router-view")],1)],1)},s=[],i=a("c973"),l=a.n(i),r=(a("96cf"),a("b0c0"),a("a434"),a("8e44")),c={name:"MainLayout",computed:{userInfo:{get:function(){return this.$store.state.user.userInfo}},isAllowBack:{get:function(){return this.$store.state.config.isAllowBack}}},data:function(){return{leftDrawerOpen:!0,selected:null,metadataMenu:{label:"元数据",labelKey:"metadata",icon:"work_outline",children:[{label:"序列号",labelKey:"/metadata/sequences",icon:"format_list_numbered",children:[]},{label:"表",labelKey:"/metadata/tables",icon:"o_table_rows",children:[]},{label:"关系",labelKey:"/metadata/relations",icon:"content_copy",children:[]}]},businessMenu:{label:"业务数据",labelKey:"business",icon:"business",children:[]},systemBusinessMenu:{label:"内置数据",labelKey:"systemBusiness",icon:"tab",children:[]},systemMenu:{label:"系统",labelKey:"system",icon:"o_build",children:[{label:"设置",labelKey:"/setting",icon:"o_settings"},{label:"关于",labelKey:"/about",icon:"o_info"}]},allMenu:[]}},created:function(){this.$root.$on("updateMenuTree",this.updateMenuTreeCb),this.init()},mounted:function(){},activated:function(){},deactivated:function(){},updated:function(){},destroyed:function(){this.$root.$off("updateMenuTree",this.updateMenuTreeCb)},methods:{init:function(){var e=this;return l()(regeneratorRuntime.mark((function t(){var a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.info("init"),t.prev=1,t.next=4,r["e"].list(1,9999);case 4:for(a=t.sent,n=0;n<a.length;n++)s=a[n],s.systemable?e.systemBusinessMenu.children.push({label:s.caption,labelKey:e.getBussinessPath(s.name),icon:"insert_chart_outlined"}):e.businessMenu.children.push({label:s.caption,labelKey:e.getBussinessPath(s.name),icon:"insert_chart_outlined"});e.allMenu.push(e.businessMenu),e.allMenu.push(e.systemBusinessMenu),e.allMenu.push(e.metadataMenu),e.allMenu.push(e.systemMenu),e.$refs.qTreeProxy.setExpanded("business",!0),e.$refs.qTreeProxy.setExpanded("systemBusiness",!0),e.$refs.qTreeProxy.setExpanded("metadata",!0),e.$refs.qTreeProxy.setExpanded("system",!0),t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](1),console.error(t.t0);case 19:case"end":return t.stop()}}),t,null,[[1,16]])})))()},updateMenu:function(){var e=this;return l()(regeneratorRuntime.mark((function t(){var a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.info("updateMenu"),t.prev=1,e.businessMenu.children.splice(0,e.businessMenu.children.length),t.next=5,r["e"].list(1,9999);case 5:for(a=t.sent,n=0;n<a.length;n++)s=a[n],s.systemable||e.businessMenu.children.push({label:s.caption,labelKey:e.getBussinessPath(s.name),icon:"insert_chart_outlined"});t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](1),console.error(t.t0),e.$q.notify(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))()},updateMenuTreeCb:function(){this.updateMenu()},getBussinessPath:function(e){return"/business/"+e},getTablePath:function(e){return"/metadata/tables/"+e},getSequencePath:function(e){return"/metadata/sequences/"+e},onMenuClickAction:function(){console.info("onMenuClickAction"),this.selected&&this.selected&&0===this.selected.indexOf("/")&&(this.$router.currentRoute.fullPath!==this.selected?(console.info("onMenuClickAction push"+this.selected),this.$router.push(this.selected)):console.info("onMenuClickAction skip"))},refresh:function(){window.location.reload(!0)},goBack:function(){this.$router.go(-1)},goHome:function(){this.$router.push("/")},logout:function(){var e=this;this.$store.dispatch("user/logout").then(l()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push("/login");case 1:case"end":return t.stop()}}),t)})))).catch((function(e){console.error(e)}))}}},o=c,u=(a("546f"),a("2877")),d=a("4d5a"),h=a("e359"),p=a("65c6"),b=a("9c40"),m=a("2c91"),f=a("4e73"),w=a("66e5"),g=a("0016"),q=a("0170"),x=a("9404"),v=a("7f41"),y=a("09e3"),k=a("714f"),C=a("eebe"),_=a.n(C),M=Object(u["a"])(o,n,s,!1,null,null,null);t["default"]=M.exports;_()(M,"components",{QLayout:d["a"],QHeader:h["a"],QToolbar:p["a"],QBtn:b["a"],QSpace:m["a"],QMenu:f["a"],QItem:w["a"],QIcon:g["a"],QItemLabel:q["a"],QDrawer:x["a"],QTree:v["a"],QPageContainer:y["a"]}),_()(M,"directives",{Ripple:k["a"]})}}]);