(function(e){function t(t){for(var a,r,s=t[0],u=t[1],l=t[2],c=0,p=[];c<s.length;c++)r=s[c],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&p.push(o[r][0]),o[r]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);f&&f(t);while(p.length)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,r=1;r<n.length;r++){var s=n[r];0!==o[s]&&(a=!1)}a&&(i.splice(t--,1),e=u(u.s=n[0]))}return e}var a={},r={1:0},o={1:0},i=[];function s(e){return u.p+"js/"+({}[e]||e)+"."+{2:"0069d189",3:"05fbfcb2",4:"cca9bd2b",5:"fe4a5f71",6:"c69444bd",7:"89730b23",8:"54288a67",9:"2ae64f8c",10:"90370717",11:"06e3fa60",12:"d3d0c8ed",13:"6aa970fb",14:"d5ce74bc",15:"f980bb93",16:"1ab01eb2",17:"2fa39fd5",18:"9c504811",19:"4981d50d",20:"6964e7ef",21:"b4d8589d",22:"9952f377",23:"869185d5",24:"1fdf507e",25:"ba68bcc3",26:"11809d1a"}[e]+".js"}function u(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={2:1,3:1,4:1,5:1,6:1,7:1,8:1,9:1,10:1,11:1,12:1,13:1,14:1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var a="css/"+({}[e]||e)+"."+{2:"3795193b",3:"6a88055e",4:"fbda5870",5:"ec83fa4a",6:"3f703b6f",7:"10863969",8:"6d9fc8c0",9:"3f703b6f",10:"3f703b6f",11:"3f703b6f",12:"3f703b6f",13:"3f703b6f",14:"3f703b6f",15:"31d6cfe0",16:"31d6cfe0",17:"31d6cfe0",18:"31d6cfe0",19:"31d6cfe0",20:"31d6cfe0",21:"31d6cfe0",22:"31d6cfe0",23:"31d6cfe0",24:"31d6cfe0",25:"31d6cfe0",26:"31d6cfe0"}[e]+".css",o=u.p+a,i=document.getElementsByTagName("link"),s=0;s<i.length;s++){var l=i[s],c=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(c===a||c===o))return t()}var p=document.getElementsByTagName("style");for(s=0;s<p.length;s++){l=p[s],c=l.getAttribute("data-href");if(c===a||c===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var a=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=a,delete r[e],f.parentNode.removeChild(f),n(i)},f.href=o;var d=document.getElementsByTagName("head")[0];d.appendChild(f)})).then((function(){r[e]=0})));var a=o[e];if(0!==a)if(a)t.push(a[2]);else{var i=new Promise((function(t,n){a=o[e]=[t,n]}));t.push(a[2]=i);var l,c=document.createElement("script");c.charset="utf-8",c.timeout=120,u.nc&&c.setAttribute("nonce",u.nc),c.src=s(e);var p=new Error;l=function(t){c.onerror=c.onload=null,clearTimeout(f);var n=o[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;p.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",p.name="ChunkLoadError",p.type=a,p.request=r,n[1](p)}o[e]=void 0}};var f=setTimeout((function(){l({type:"timeout",target:c})}),12e4);c.onerror=c.onload=l,document.head.appendChild(c)}return Promise.all(t)},u.m=e,u.c=a,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)u.d(n,a,function(t){return e[t]}.bind(null,a));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/crudapi/",u.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var p=0;p<l.length;p++)t(l[p]);var f=c;i.push([0,0]),n()})({0:function(e,t,n){e.exports=n("2f39")},"0308":function(e,t,n){var a,r,o=n("7037").default;n("ac1f"),n("466d"),n("d3b7"),n("25f0"),n("e260"),n("5cc6"),n("907a"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("a15b"),n("c19f"),n("00b4"),n("fb6a"),function(i){"object"===o(t)?e.exports=i():(a=i,r="function"===typeof a?a.call(t,n,t,e):a,void 0===r||(e.exports=r))}((function(e){"use strict";var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(e,t){var n=e[0],a=e[1],r=e[2],o=e[3];n+=(a&r|~a&o)+t[0]-680876936|0,n=(n<<7|n>>>25)+a|0,o+=(n&a|~n&r)+t[1]-389564586|0,o=(o<<12|o>>>20)+n|0,r+=(o&n|~o&a)+t[2]+606105819|0,r=(r<<17|r>>>15)+o|0,a+=(r&o|~r&n)+t[3]-1044525330|0,a=(a<<22|a>>>10)+r|0,n+=(a&r|~a&o)+t[4]-176418897|0,n=(n<<7|n>>>25)+a|0,o+=(n&a|~n&r)+t[5]+1200080426|0,o=(o<<12|o>>>20)+n|0,r+=(o&n|~o&a)+t[6]-1473231341|0,r=(r<<17|r>>>15)+o|0,a+=(r&o|~r&n)+t[7]-45705983|0,a=(a<<22|a>>>10)+r|0,n+=(a&r|~a&o)+t[8]+1770035416|0,n=(n<<7|n>>>25)+a|0,o+=(n&a|~n&r)+t[9]-1958414417|0,o=(o<<12|o>>>20)+n|0,r+=(o&n|~o&a)+t[10]-42063|0,r=(r<<17|r>>>15)+o|0,a+=(r&o|~r&n)+t[11]-1990404162|0,a=(a<<22|a>>>10)+r|0,n+=(a&r|~a&o)+t[12]+1804603682|0,n=(n<<7|n>>>25)+a|0,o+=(n&a|~n&r)+t[13]-40341101|0,o=(o<<12|o>>>20)+n|0,r+=(o&n|~o&a)+t[14]-1502002290|0,r=(r<<17|r>>>15)+o|0,a+=(r&o|~r&n)+t[15]+1236535329|0,a=(a<<22|a>>>10)+r|0,n+=(a&o|r&~o)+t[1]-165796510|0,n=(n<<5|n>>>27)+a|0,o+=(n&r|a&~r)+t[6]-1069501632|0,o=(o<<9|o>>>23)+n|0,r+=(o&a|n&~a)+t[11]+643717713|0,r=(r<<14|r>>>18)+o|0,a+=(r&n|o&~n)+t[0]-373897302|0,a=(a<<20|a>>>12)+r|0,n+=(a&o|r&~o)+t[5]-701558691|0,n=(n<<5|n>>>27)+a|0,o+=(n&r|a&~r)+t[10]+38016083|0,o=(o<<9|o>>>23)+n|0,r+=(o&a|n&~a)+t[15]-660478335|0,r=(r<<14|r>>>18)+o|0,a+=(r&n|o&~n)+t[4]-405537848|0,a=(a<<20|a>>>12)+r|0,n+=(a&o|r&~o)+t[9]+568446438|0,n=(n<<5|n>>>27)+a|0,o+=(n&r|a&~r)+t[14]-1019803690|0,o=(o<<9|o>>>23)+n|0,r+=(o&a|n&~a)+t[3]-187363961|0,r=(r<<14|r>>>18)+o|0,a+=(r&n|o&~n)+t[8]+1163531501|0,a=(a<<20|a>>>12)+r|0,n+=(a&o|r&~o)+t[13]-1444681467|0,n=(n<<5|n>>>27)+a|0,o+=(n&r|a&~r)+t[2]-51403784|0,o=(o<<9|o>>>23)+n|0,r+=(o&a|n&~a)+t[7]+1735328473|0,r=(r<<14|r>>>18)+o|0,a+=(r&n|o&~n)+t[12]-1926607734|0,a=(a<<20|a>>>12)+r|0,n+=(a^r^o)+t[5]-378558|0,n=(n<<4|n>>>28)+a|0,o+=(n^a^r)+t[8]-2022574463|0,o=(o<<11|o>>>21)+n|0,r+=(o^n^a)+t[11]+1839030562|0,r=(r<<16|r>>>16)+o|0,a+=(r^o^n)+t[14]-35309556|0,a=(a<<23|a>>>9)+r|0,n+=(a^r^o)+t[1]-1530992060|0,n=(n<<4|n>>>28)+a|0,o+=(n^a^r)+t[4]+1272893353|0,o=(o<<11|o>>>21)+n|0,r+=(o^n^a)+t[7]-155497632|0,r=(r<<16|r>>>16)+o|0,a+=(r^o^n)+t[10]-1094730640|0,a=(a<<23|a>>>9)+r|0,n+=(a^r^o)+t[13]+681279174|0,n=(n<<4|n>>>28)+a|0,o+=(n^a^r)+t[0]-358537222|0,o=(o<<11|o>>>21)+n|0,r+=(o^n^a)+t[3]-722521979|0,r=(r<<16|r>>>16)+o|0,a+=(r^o^n)+t[6]+76029189|0,a=(a<<23|a>>>9)+r|0,n+=(a^r^o)+t[9]-640364487|0,n=(n<<4|n>>>28)+a|0,o+=(n^a^r)+t[12]-421815835|0,o=(o<<11|o>>>21)+n|0,r+=(o^n^a)+t[15]+530742520|0,r=(r<<16|r>>>16)+o|0,a+=(r^o^n)+t[2]-995338651|0,a=(a<<23|a>>>9)+r|0,n+=(r^(a|~o))+t[0]-198630844|0,n=(n<<6|n>>>26)+a|0,o+=(a^(n|~r))+t[7]+1126891415|0,o=(o<<10|o>>>22)+n|0,r+=(n^(o|~a))+t[14]-1416354905|0,r=(r<<15|r>>>17)+o|0,a+=(o^(r|~n))+t[5]-57434055|0,a=(a<<21|a>>>11)+r|0,n+=(r^(a|~o))+t[12]+1700485571|0,n=(n<<6|n>>>26)+a|0,o+=(a^(n|~r))+t[3]-1894986606|0,o=(o<<10|o>>>22)+n|0,r+=(n^(o|~a))+t[10]-1051523|0,r=(r<<15|r>>>17)+o|0,a+=(o^(r|~n))+t[1]-2054922799|0,a=(a<<21|a>>>11)+r|0,n+=(r^(a|~o))+t[8]+1873313359|0,n=(n<<6|n>>>26)+a|0,o+=(a^(n|~r))+t[15]-30611744|0,o=(o<<10|o>>>22)+n|0,r+=(n^(o|~a))+t[6]-1560198380|0,r=(r<<15|r>>>17)+o|0,a+=(o^(r|~n))+t[13]+1309151649|0,a=(a<<21|a>>>11)+r|0,n+=(r^(a|~o))+t[4]-145523070|0,n=(n<<6|n>>>26)+a|0,o+=(a^(n|~r))+t[11]-1120210379|0,o=(o<<10|o>>>22)+n|0,r+=(n^(o|~a))+t[2]+718787259|0,r=(r<<15|r>>>17)+o|0,a+=(o^(r|~n))+t[9]-343485551|0,a=(a<<21|a>>>11)+r|0,e[0]=n+e[0]|0,e[1]=a+e[1]|0,e[2]=r+e[2]|0,e[3]=o+e[3]|0}function a(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function r(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function o(e){var t,r,o,i,s,u,l=e.length,c=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=l;t+=64)n(c,a(e.substring(t-64,t)));for(e=e.substring(t-64),r=e.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<r;t+=1)o[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(n(c,o),t=0;t<16;t+=1)o[t]=0;return i=8*l,i=i.toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(i[2],16),u=parseInt(i[1],16)||0,o[14]=s,o[15]=u,n(c,o),c}function i(e){var t,a,o,i,s,u,l=e.length,c=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=l;t+=64)n(c,r(e.subarray(t-64,t)));for(e=t-64<l?e.subarray(t-64):new Uint8Array(0),a=e.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<a;t+=1)o[t>>2]|=e[t]<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(n(c,o),t=0;t<16;t+=1)o[t]=0;return i=8*l,i=i.toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(i[2],16),u=parseInt(i[1],16)||0,o[14]=s,o[15]=u,n(c,o),c}function s(e){var n,a="";for(n=0;n<4;n+=1)a+=t[e>>8*n+4&15]+t[e>>8*n&15];return a}function u(e){var t;for(t=0;t<e.length;t+=1)e[t]=s(e[t]);return e.join("")}function l(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function c(e,t){var n,a=e.length,r=new ArrayBuffer(a),o=new Uint8Array(r);for(n=0;n<a;n+=1)o[n]=e.charCodeAt(n);return t?o:r}function p(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function f(e,t,n){var a=new Uint8Array(e.byteLength+t.byteLength);return a.set(new Uint8Array(e)),a.set(new Uint8Array(t),e.byteLength),n?a:a.buffer}function d(e){var t,n=[],a=e.length;for(t=0;t<a-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function m(){this.reset()}return"5d41402abc4b2a76b9719d911017c592"!==u(o("hello"))&&function(e,t){var n=(65535&e)+(65535&t),a=(e>>16)+(t>>16)+(n>>16);return a<<16|65535&n},"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return e=0|e||0,e<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(n,a){var r,o,i,s,u=this.byteLength,l=t(n,u),c=u;return a!==e&&(c=t(a,u)),l>c?new ArrayBuffer(0):(r=c-l,o=new ArrayBuffer(r),i=new Uint8Array(o),s=new Uint8Array(this,l,r),i.set(s),o)}}(),m.prototype.append=function(e){return this.appendBinary(l(e)),this},m.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,r=this._buff.length;for(t=64;t<=r;t+=64)n(this._hash,a(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},m.prototype.end=function(e){var t,n,a=this._buff,r=a.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<r;t+=1)o[t>>2]|=a.charCodeAt(t)<<(t%4<<3);return this._finish(o,r),n=u(this._hash),e&&(n=d(n)),this.reset(),n},m.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},m.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},m.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},m.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},m.prototype._finish=function(e,t){var a,r,o,i=t;if(e[i>>2]|=128<<(i%4<<3),i>55)for(n(this._hash,e),i=0;i<16;i+=1)e[i]=0;a=8*this._length,a=a.toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(a[2],16),o=parseInt(a[1],16)||0,e[14]=r,e[15]=o,n(this._hash,e)},m.hash=function(e,t){return m.hashBinary(l(e),t)},m.hashBinary=function(e,t){var n=o(e),a=u(n);return t?d(a):a},m.ArrayBuffer=function(){this.reset()},m.ArrayBuffer.prototype.append=function(e){var t,a=f(this._buff.buffer,e,!0),o=a.length;for(this._length+=e.byteLength,t=64;t<=o;t+=64)n(this._hash,r(a.subarray(t-64,t)));return this._buff=t-64<o?new Uint8Array(a.buffer.slice(t-64)):new Uint8Array(0),this},m.ArrayBuffer.prototype.end=function(e){var t,n,a=this._buff,r=a.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<r;t+=1)o[t>>2]|=a[t]<<(t%4<<3);return this._finish(o,r),n=u(this._hash),e&&(n=d(n)),this.reset(),n},m.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},m.ArrayBuffer.prototype.getState=function(){var e=m.prototype.getState.call(this);return e.buff=p(e.buff),e},m.ArrayBuffer.prototype.setState=function(e){return e.buff=c(e.buff,!0),m.prototype.setState.call(this,e)},m.ArrayBuffer.prototype.destroy=m.prototype.destroy,m.ArrayBuffer.prototype._finish=m.prototype._finish,m.ArrayBuffer.hash=function(e,t){var n=i(new Uint8Array(e)),a=u(n);return t?d(a):a},m}))},"05ee":function(e,t,n){"use strict";n("81ae")},"07bf":function(e,t){},1856:function(e,t,n){},"187d":function(e,t,n){"use strict";n("d874")},"2f39":function(e,t,n){"use strict";n.r(t);var a=n("c973"),r=n.n(a),o=(n("96cf"),n("ac1f"),n("5319"),n("5c7d"),n("7d6e"),n("e54f"),n("a4b7"),n("62f2"),n("7e6d"),n("2b0e")),i=n("bf69"),s=n("42d2"),u=n("b05d"),l=n("18d6"),c=n("2a19"),p=n("f508"),f=n("436b"),d=n("a639");o["a"].use(u["a"],{config:{},lang:i["a"],iconSet:s["a"],plugins:{LocalStorage:l["a"],Notify:c["a"],Loading:p["a"],Dialog:f["a"],SessionStorage:d["a"]}});var m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"q-app"}},[n("router-view")],1)},h=[],b={name:"App"},v=b,y=n("2877"),g=Object(y["a"])(v,m,h,!1,null,null,null),w=g.exports,T=n("4360"),x=n("a18c"),k=function(){return C.apply(this,arguments)};function C(){return C=r()(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("function"!==typeof T["a"]){e.next=6;break}return e.next=3,Object(T["a"])({Vue:o["a"]});case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=T["a"];case 7:if(t=e.t0,"function"!==typeof x["a"]){e.next=14;break}return e.next=11,Object(x["a"])({Vue:o["a"],store:t});case 11:e.t1=e.sent,e.next=15;break;case 14:e.t1=x["a"];case 15:return n=e.t1,t.$router=n,a={router:n,store:t,render:function(e){return e(w)}},a.el="#q-app",e.abrupt("return",{app:a,store:t,router:n});case 20:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}var q=n("a925"),R={failed:"Action failed",success:"Action was successful"},N={"en-us":R};o["a"].use(q["a"]);var P=new q["a"]({locale:"zh-hans",fallbackLocale:"zh-hans",messages:N}),D=function(e){var t=e.app;t.i18n=P},_=n("758b"),I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.pagination.count>0?n("div",{staticClass:"q-pa-md row justify-center items-center"},[n("div",{staticClass:"q-pr-sm"},[n("q-item-label",[e._v("共 "+e._s(e.pagination.count)+" 条记录 第 "+e._s(e.pagination.page)+" /\n      "+e._s(Math.ceil(e.pagination.count/e.pagination.rowsPerPage))+"\n      页")])],1),n("div",[n("div",{staticClass:"flex flex-center page-border"},[n("q-pagination",{attrs:{unelevated:"",max:Math.ceil(e.pagination.count/e.pagination.rowsPerPage),"max-pages":10,"direction-links":!0,ellipses:!1,"boundary-numbers":!0,"boundary-links":!0},on:{input:e.onRequestAction},model:{value:e.pagination.page,callback:function(t){e.$set(e.pagination,"page",t)},expression:"pagination.page"}})],1)]),n("div",[n("div",{staticClass:"row justify-center items-center"},[n("div",{staticClass:"q-pl-sm"},[n("q-select",{staticStyle:{width:"120px"},attrs:{outlined:"",options:e.pageSizeOptions},on:{input:e.onPageSizeAction},model:{value:e.pageSize,callback:function(t){e.pageSize=t},expression:"pageSize"}})],1),n("div",{staticClass:"q-px-sm"},[n("div",{staticClass:"row justify-center items-center"},[n("q-item-label",[e._v("跳至")]),n("div",{staticClass:"q-px-sm page-input"},[n("q-input",{staticStyle:{width:"80px"},attrs:{outlined:"",type:"number"},on:{input:e.onRequestAction},model:{value:e.pagination.page,callback:function(t){e.$set(e.pagination,"page",e._n(t))},expression:"pagination.page"}})],1),n("q-item-label",[e._v("页")])],1)])])])]):e._e()},M=[],A=(n("7db0"),n("d3b7"),n("11ec")),S={name:"CPage",props:{value:{required:!0}},data:function(){return{pageSize:{label:"10/页",value:10},pageSizeOptions:[{label:"5条/页",value:5},{label:"10条/页",value:10},{label:"15条/页",value:15},{label:"20条/页",value:20},{label:"30条/页",value:30},{label:"50条/页",value:50},{label:"100条/页",value:100}]}},created:function(){console.info("CPage created"),this.init()},mounted:function(){console.info("CPage mounted")},activated:function(){console.info("CPage->activated")},deactivated:function(){console.info("CPage->deactivated")},updated:function(){console.info("CPage->updated")},destroyed:function(){console.info("CPage->destroyed")},filters:{},computed:{pagination:function(){return Object(A["a"])(!0,{},this.value)}},methods:{init:function(){var e=this;if(console.info("CPage->init"),this.pageSize.value!==this.value.rowsPerPage){var t=this.pageSizeOptions.find((function(t){return t.value===e.value.rowsPerPage}));if(!t)throw"invalid rowsPerPage";console.info(t),this.pageSize={value:t.value,label:t.label}}},onRequestAction:function(){console.info("CPage->onRequestAction"),this.$emit("input",this.pagination)},onPageSizeAction:function(){console.info("CPage->onPageSizeAction"),this.pagination.rowsPerPage!==this.pageSize.value&&(this.pagination.rowsPerPage=this.pageSize.value),this.$emit("input",this.pagination)}}},E=S,B=(n("4d3d"),n("0170")),O=n("3b16"),F=n("ddd8"),$=n("27f9"),L=n("9c40"),Q=n("eebe"),Y=n.n(Q),K=Object(y["a"])(E,I,M,!1,null,null,null),H=K.exports;Y()(K,"components",{QItemLabel:B["a"],QPagination:O["a"],QSelect:F["a"],QInput:$["a"],QBtn:L["a"]});var j={install:function(e){e.component("CPage",H)}},U=j,z=function(){var e=r()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.Vue,n.use(U);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("q-toggle",{attrs:{label:"开启大文件上传模式"},model:{value:e.enableBigFile,callback:function(t){e.enableBigFile=t},expression:"enableBigFile"}}),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.enableBigFile,expression:"!enableBigFile"}],staticClass:"q-py-md"},[n("q-file",{attrs:{label:"请选择文件（普通上传）"},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{name:"attach_file"}})]},proxy:!0},{key:"after",fn:function(){return[n("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"cloud_upload"},on:{click:e.onSubmitClick}})]},proxy:!0}]),model:{value:e.normalFile,callback:function(t){e.normalFile=t},expression:"normalFile"}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:e.enableBigFile,expression:"enableBigFile"}],staticClass:"q-py-md"},[n("q-file",{attrs:{label:"请选择文件（大文件上传）"},on:{input:e.bigFileAdded},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{name:"attach_file"}})]},proxy:!0},{key:"after",fn:function(){return[n("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"cloud_upload"},on:{click:e.onBigSubmitClick}})]},proxy:!0}]),model:{value:e.bigFile,callback:function(t){e.bigFile=t},expression:"bigFile"}})],1),e.fileInfo.url?n("div",{staticClass:"q-py-md"},[n("a",{attrs:{target:"_blank",href:e.fileInfo.url}},[e._v("查看文件")])]):e._e()],1)},J=[],X=(n("fb6a"),n("b0c0"),n("e260"),n("e6cf"),n("3ca3"),n("ddb0"),n("5a30")),G=n.n(X),W=n("8e44"),Z=n("0308"),ee=n.n(Z),te=function(e,t,n){var a=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,r=(e=e,t||2097152),o=Math.ceil(e.size/r),i=0,s=new ee.a.ArrayBuffer,u=new FileReader;function l(){var t=i*r,n=t+r>=e.size?e.size:t+r;u.readAsArrayBuffer(a.call(e,t,n))}u.onload=function(e){console.log("read chunk nr",i+1,"of",o),s.append(e.target.result),i++,i<o?l():(n(null,s.end()),console.log("finished loading"))},u.onerror=function(){n("oops, something went wrong.")},l()},ne={name:"CFile",props:{value:{required:!0}},data:function(){return{enableBigFile:!1,normalFile:null,bigFile:null,chunkSize:20971520,md5:null,chunkInfo:{},fileInfo:{}}},created:function(){console.info("CFile created"),this.init()},mounted:function(){console.info("CFile mounted")},activated:function(){console.info("CFile->activated")},deactivated:function(){console.info("CFile->deactivated")},updated:function(){console.info("CFile->updated")},destroyed:function(){console.info("CFile->destroyed")},filters:{},computed:{},methods:{init:function(){console.info("CFile->init"),this.fileInfo.url=this.value},onSubmitClick:function(){var e=this;return r()(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.info("CFile->onSubmitClick"),e.normalFile){t.next=4;break}return e.$q.notify({message:"请选择文件！",type:"warning"}),t.abrupt("return");case 4:return e.$q.loading.show({message:"上传中"}),t.prev=5,n=new G.a,n.append("file",e.normalFile),t.next=10,W["b"].upload(n,(function(e){console.info(e)}));case 10:e.fileInfo=t.sent,e.$q.loading.hide(),e.$emit("input",e.fileInfo),t.next=19;break;case 15:t.prev=15,t.t0=t["catch"](5),e.$q.loading.hide(),console.error(t.t0);case 19:case"end":return t.stop()}}),t,null,[[5,15]])})))()},bigFileAdded:function(e){var t=this;console.info("CFile->fileAdded"),e?(this.$q.loading.show({message:"文件准备中"}),te(e,this.chunkSize,(function(e,n){t.md5=n,console.info(e),console.info(n),t.$q.loading.hide()}))):console.info("CFile->cancel")},getChunks:function(){var e=this.bigFile.size,t=this.chunkSize,n=Math.ceil(e/t);return n},uploadWithBlock:function(e){var t=this.bigFile.size,n=this.chunkSize,a=this.getChunks(),r=e*n,o=r+n>=t?t:r+n,i=this.bigFile.slice(r,o),s=new G.a;return s.append("file",i),s.append("name",this.bigFile.name),s.append("md5",this.md5),s.append("size",this.bigFile.size),s.append("chunks",a),s.append("chunk",e),W["b"].bigUpload(s,(function(e){}))},checkFinished:function(e){for(var t=0;t<e.length;++t){var n=e[t];n.isFinished&&(console.info("CFile->checkFinished"),this.fileInfo=n,this.$emit("input",this.fileInfo),this.$q.loading.hide())}},onBigSubmitClick:function(){var e=this;return r()(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.info("CFile->onBigSubmitClick"),e.bigFile){t.next=4;break}return e.$q.notify({message:"请选择文件！",type:"warning"}),t.abrupt("return");case 4:for(e.$q.loading.show({message:"上传中"}),t.prev=5,n=e.getChunks(),a=[],r=0;r<n;++r)a.push(e.uploadWithBlock(r));return t.next=11,Promise.all(a).then((function(t){console.info(t),e.checkFinished(t)}));case 11:t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](5),e.$q.loading.hide(),console.error(t.t0);case 17:case"end":return t.stop()}}),t,null,[[5,13]])})))()}}},ae=ne,re=n("9564"),oe=n("7d53"),ie=n("0016"),se=n("068f"),ue=n("6ac0"),le=Object(y["a"])(ae,V,J,!1,null,null,null),ce=le.exports;Y()(le,"components",{QToggle:re["a"],QFile:oe["a"],QIcon:ie["a"],QBtn:L["a"],QImg:se["a"],QVideo:ue["a"]});var pe={install:function(e){e.component("CFile",ce)}},fe=pe,de=function(){var e=r()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.Vue,n.use(fe);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("q-banner",{staticClass:"q-mb-md text-black bg-listcolor",attrs:{"inline-actions":""},scopedSlots:e._u([{key:"action",fn:function(){return[n("q-btn",{attrs:{dense:"",flat:"",unelevated:"",round:"",color:"primary",icon:e.expand?"expand_less":"expand_more"},on:{click:function(t){e.expand=!e.expand}}})]},proxy:!0}])},[e._v("\n    "+e._s(e.tableCaption)+"\n    ")]),n("form",{directives:[{name:"show",rawName:"v-show",value:e.expand,expression:"expand"}],staticClass:"q-pb-md",on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.onSubmit.apply(null,arguments)}}},[e.selectedList.length>0?n("div",{staticClass:"row"},e._l(e.selectedList,(function(t){return n("div",{key:t.columnId,staticClass:"list-group-item q-pa-md",class:e._f("classFormat")(t)},[n("div",[n("div",{class:{required:!t.column.nullable}},[e._v("\n            "+e._s(t.column.caption)+":\n          ")]),t.column.relationTableName?n("div",{staticClass:"row items-baseline content-center",staticStyle:{"border-bottom":"1px solid rgba(0,0,0,0.12)"}},[n("div",{staticClass:"col-11"},[n("span",[e._v(e._s(e._f("relationDataFormat")(t.column.value,t.column)))])]),n("div",{staticClass:"col-1"},[n("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"zoom_in"},on:{click:function(n){return e.openDialogClickAction(t.column)}}})],1)]):e.isStringType(t.column.dataType)?n("q-input",{attrs:{placeholder:t.column.description,type:t.isPwd?"password":"text"},scopedSlots:e._u([t.isText?null:{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.isPwd?"visibility_off":"visibility"},on:{click:function(e){t.isPwd=!t.isPwd}}})]},proxy:!0}],null,!0),model:{value:t.column.value,callback:function(n){e.$set(t.column,"value",n)},expression:"formElement.column.value"}}):e.isTextType(t.column.dataType)?n("q-editor",{attrs:{placeholder:t.column.description},model:{value:t.column.value,callback:function(n){e.$set(t.column,"value",n)},expression:"formElement.column.value"}}):e.isDateTimeType(t.column.dataType)?n("q-input",{scopedSlots:e._u([{key:"prepend",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[n("q-popup-proxy",{ref:"qDateProxy",refInFor:!0,attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-date",{attrs:{mask:"YYYY-MM-DD HH:mm:ss"},on:{input:function(t){return e.hideRefPopProxyAction("qDateProxy")}},model:{value:t.column.value,callback:function(n){e.$set(t.column,"value",n)},expression:"formElement.column.value"}})],1)],1)]},proxy:!0},{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[n("q-popup-proxy",{ref:"qTimeProxy",refInFor:!0,attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-time",{attrs:{mask:"YYYY-MM-DD HH:mm:ss",format24h:"","with-seconds":""},on:{input:function(t){return e.hideRefPopProxyAction("qTimeProxy")}},model:{value:t.column.value,callback:function(n){e.$set(t.column,"value",n)},expression:"formElement.column.value"}})],1)],1)]},proxy:!0}],null,!0),model:{value:t.column.value,callback:function(n){e.$set(t.column,"value",n)},expression:"formElement.column.value"}}):e.isDateType(t.column.dataType)?n("q-input",{scopedSlots:e._u([{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[n("q-popup-proxy",{ref:"qDateProxy",refInFor:!0,attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-date",{attrs:{mask:"YYYY-MM-DD"},on:{input:function(t){return e.hideRefPopProxyAction("qDateProxy")}},model:{value:t.column.value,callback:function(n){e.$set(t.column,"value",n)},expression:"formElement.column.value"}})],1)],1)]},proxy:!0}],null,!0),model:{value:t.column.value,callback:function(n){e.$set(t.column,"value",n)},expression:"formElement.column.value"}}):e.isTimeType(t.column.dataType)?n("q-input",{scopedSlots:e._u([{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[n("q-popup-proxy",{ref:"qTimeProxy",refInFor:!0,attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-time",{attrs:{mask:"HH:mm:ss",format24h:"","with-seconds":""},on:{input:function(t){return e.hideRefPopProxyAction("qTimeProxy")}},model:{value:t.column.value,callback:function(n){e.$set(t.column,"value",n)},expression:"formElement.column.value"}})],1)],1)]},proxy:!0}],null,!0),model:{value:t.column.value,callback:function(n){e.$set(t.column,"value",n)},expression:"formElement.column.value"}}):e.isBoolType(t.column.dataType)?n("q-toggle",{model:{value:t.column.value,callback:function(n){e.$set(t.column,"value",n)},expression:"formElement.column.value"}}):e.isNumberType(t.column.dataType)?n("q-input",{attrs:{placeholder:t.column.description,type:"number"},model:{value:t.column.value,callback:function(n){e.$set(t.column,"value",n)},expression:"formElement.column.value"}}):e.isAttachmentType(t.column.dataType)?n("CFile",{on:{input:function(e){t.column.value=e.url}},model:{value:t.column.value,callback:function(n){e.$set(t.column,"value",n)},expression:"formElement.column.value"}}):n("q-input",{attrs:{placeholder:t.column.description,type:t.isPwd?"password":"text"},scopedSlots:e._u([t.isText?null:{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.isPwd?"visibility_off":"visibility"},on:{click:function(e){t.isPwd=!t.isPwd}}})]},proxy:!0}],null,!0),model:{value:t.column.value,callback:function(n){e.$set(t.column,"value",n)},expression:"formElement.column.value"}})],1)])})),0):n("div",e._l(e.insertColumns,(function(t){return n("div",{key:t.name,staticClass:"row items-baseline content-center justify-start q-pb-md"},[n("div",{staticClass:"col-3 text-right text-subtitle2 q-pr-md query-cond",class:{required:!t.nullable}},[e._v("\n        "+e._s(t.caption)+":")]),n("div",{staticClass:"col-7"},[t.relationTableName?n("div",{staticClass:"row items-baseline content-center",staticStyle:{"border-bottom":"1px solid rgba(0,0,0,0.12)"}},[n("div",{staticClass:"col-11"},[n("span",[e._v(e._s(e._f("relationDataFormat")(t.value,t)))])]),n("div",{staticClass:"col-1"},[n("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"zoom_in"},on:{click:function(n){return e.openDialogClickAction(t)}}})],1)]):e.isDateTimeType(t.dataType)?n("q-input",{scopedSlots:e._u([{key:"prepend",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[n("q-popup-proxy",{ref:"qDateProxy",refInFor:!0,attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-date",{attrs:{mask:"YYYY-MM-DD HH:mm:ss"},on:{input:function(t){return e.hideRefPopProxyAction("qDateProxy")}},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1)],1)]},proxy:!0},{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[n("q-popup-proxy",{ref:"qTimeProxy",refInFor:!0,attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-time",{attrs:{mask:"YYYY-MM-DD HH:mm:ss",format24h:"","with-seconds":""},on:{input:function(t){return e.hideRefPopProxyAction("qTimeProxy")}},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1)],1)]},proxy:!0}],null,!0),model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}}):e.isDateType(t.dataType)?n("q-input",{scopedSlots:e._u([{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[n("q-popup-proxy",{ref:"qDateProxy",refInFor:!0,attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-date",{attrs:{mask:"YYYY-MM-DD"},on:{input:function(t){return e.hideRefPopProxyAction("qDateProxy")}},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1)],1)]},proxy:!0}],null,!0),model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}}):e.isTimeType(t.dataType)?n("q-input",{scopedSlots:e._u([{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[n("q-popup-proxy",{ref:"qTimeProxy",refInFor:!0,attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-time",{attrs:{mask:"HH:mm:ss",format24h:"","with-seconds":""},on:{input:function(t){return e.hideRefPopProxyAction("qTimeProxy")}},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1)],1)]},proxy:!0}],null,!0),model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}}):e.isBoolType(t.dataType)?n("q-toggle",{model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}}):e.isNumberType(t.dataType)?n("q-input",{attrs:{placeholder:t.description,type:"number"},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}}):e.isAttachmentType(t.dataType)?n("CFile",{on:{input:function(e){t.value=e.url}},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}}):e.isTextType(t.dataType)?n("q-editor",{attrs:{placeholder:t.description},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}}):n("q-input",{attrs:{placeholder:t.description,type:t.isPwd?"password":"text"},scopedSlots:e._u([t.isText?null:{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.isPwd?"visibility_off":"visibility"},on:{click:function(e){t.isPwd=!t.isPwd}}})]},proxy:!0}],null,!0),model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1)])})),0)]),e._l(e.oneToOneMainToSubTables,(function(e){return n("div",{key:e.relationName},[n("CTableNew",{ref:"rTableNewRef"+e.relationName,refInFor:!0,attrs:{fkColumnName:e.fkColumnName,tableName:e.tableName}})],1)})),e._l(e.oneToManySubTables,(function(e){return n("div",{key:e.relationName},[n("CTableList",{ref:"rTableListRef"+e.relationName,refInFor:!0,attrs:{fkColumnName:e.fkColumnName,tableName:e.tableName}})],1)}))],2)},he=[],be=(n("159b"),n("a15b"),n("498a"),n("25f0"),n("d81d"),n("4de4"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-dialog",{ref:"dialog",attrs:{"full-width":"","full-height":"",persistent:""},on:{hide:e.onDialogHide}},[n("q-card",{staticClass:"q-dialog-plugin"},[n("CTableListRead",{ref:"rTablelistRead",attrs:{tableName:e.tableName,readOnly:"true",selectionProp:"single"},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),n("q-card-actions",{attrs:{align:"center"}},[n("q-btn",{attrs:{color:"primary",label:"确定",unelevated:"","no-caps":""},on:{click:e.onOKClick}}),n("q-btn",{attrs:{color:"negative",label:"取消",unelevated:"","no-caps":""},on:{click:e.onCancelClick}})],1)],1)],1)}),ve=[],ye={props:{tableName:{required:!0},data:{required:!1}},data:function(){return{selected:[]}},methods:{show:function(){this.selected=this.data,this.$refs.dialog.show()},hide:function(){this.$refs.dialog.hide()},onDialogHide:function(){this.$emit("hide")},onOKClick:function(){this.$emit("ok",this.selected),this.hide()},onCancelClick:function(){this.hide()}}},ge=ye,we=n("24e8"),Te=n("f09f"),xe=n("4b7e"),ke=Object(y["a"])(ge,be,ve,!1,null,null,null),Ce=ke.exports;Y()(ke,"components",{QDialog:we["a"],QCard:Te["a"],QCardActions:xe["a"],QBtn:L["a"]});var qe={name:"CTableNew",props:{tableName:{required:!0},fkColumnName:{required:!1,type:String,default:""}},data:function(){return{loading:!0,expand:!0,tableCaption:"",insertColumns:[],relationMap:{},oneToOneMainToSubTables:[],oneToManySubTables:[],selectedList:[]}},created:function(){console.info("CTableNew created"),this.init()},mounted:function(){console.info("CTableNew mounted")},activated:function(){console.info("CTableNew->activated")},deactivated:function(){console.info("CTableNew->deactivated")},updated:function(){console.info("CTableNew->updated")},destroyed:function(){console.info("CTableNew->destroyed")},filters:{relationDataFormat:function(e,t){if(e){if(t.relationDisplayColumns.length>0){var n=[];return t.relationDisplayColumns.forEach((function(t){n.push(e[t.name])})),n.join("|")}return e[t.relationColumnName]}return null},classFormat:function(e){var t="";return e.width&&(t="col-"+e.width),t}},computed:{},methods:{init:function(e){var t=this;return r()(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.insertColumns=[],e.next=3,t.loadMeta();case 3:case"end":return e.stop()}}),e)})))()},isTextType:function(e){return"TEXT"===e||"LONGTEXT"===e},isStringType:function(e){return"CHAR"===e||"VARCHAR"===e},isNumberType:function(e){return"TINYINT"===e||"SMALLINT"===e||"MEDIUMINT"===e||"INT"===e||"BIGINT"===e},isDateType:function(e){return"DATE"===e},isTimeType:function(e){return"TIME"===e},isDateTimeType:function(e){return"DATETIME"===e},isBoolType:function(e){return"BOOL"===e},isAttachmentType:function(e){return"ATTACHMENT"===e},getData:function(){for(var e=this,t={},n=0;n<this.insertColumns.length;n++){var a=this.insertColumns[n],r=a.name,o=this.relationMap[r];o?(t[r]=a.value&&a.value[a.relationColumnName],t[o.name]=a.value):void 0!=a.value&&null!=a.value&&""!==a.value.toString().trim()&&(t[r]=a.value)}return this.oneToOneMainToSubTables.forEach((function(n){var a=e.$refs["rTableNewRef"+n.relationName],r=a[0].getData();t[n.relationName]=r})),this.oneToManySubTables.forEach((function(n){var a=e.$refs["rTableListRef"+n.relationName],r=a[0].getData();t[n.relationName]=r})),t},hideRefPopProxyAction:function(e){for(var t=this.$refs[e],n=0;n<t.length;n++)t[n].hide()},openDialogClickAction:function(e){this.$q.dialog({component:Ce,parent:this,tableName:e.relationTableName,data:e.value}).onOk((function(t){e.value=t})).onCancel((function(){console.log("Cancel")})).onDismiss((function(){console.log("Called on OK or Cancel")}))},loadMeta:function(){var e=this;return r()(regeneratorRuntime.mark((function t(){var n,a,o,i,s,u,l,c,p,f,d,m,h,b,v,y;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e,e.loading=!0,t.prev=2,t.next=5,W["e"].getByName(e.tableName);case 5:return a=t.sent,e.tableCaption=a.caption,t.next=9,W["c"].getByName(e.tableName);case 9:return o=t.sent,i={},t.next=13,Promise.all(o.map(function(){var e=r()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("ManyToOne"!==t.relationType&&"OneToOneSubToMain"!==t.relationType){e.next=5;break}return e.next=3,W["e"].getByName(t.toTable.name);case 3:n=e.sent,i[t.toTable.name]=n;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 13:s={},u=[],l=[],o.forEach((function(e){if("OneToOneMainToSub"===e.relationType)u.push({relationName:e.name,tableName:e.toTable.name,fkColumnName:e.toColumn.name});else if("OneToMany"===e.relationType)l.push({relationName:e.name,tableName:e.toTable.name,fkColumnName:e.toColumn.name});else if("ManyToOne"===e.relationType||"OneToOneSubToMain"===e.relationType){var t=e.fromColumn.name;s[t]=e}})),e.oneToOneMainToSubTables=u,e.oneToManySubTables=l,e.relationMap=s,c=[],p=0;case 22:if(!(p<a.columns.length)){t.next=36;break}if(f=a.columns[p],!f.insertable){t.next=33;break}if(d=f.name,!e.fkColumnName||d!==e.fkColumnName){t.next=28;break}return t.abrupt("continue",33);case 28:"true"===f.defaultValue?f.value=!0:"false"===f.defaultValue?f.value=!1:f.value=f.defaultValue,"PASSWORD"===f.dataType?(f.isText=!1,f.isPwd=!0):(f.isText=!0,f.isPwd=!1),"TEXT"!==f.dataType&&"LONGTEXT"!==f.dataType||f.value||(f.value=""),m=e.relationMap[d],m?(f.relationTableName=m.toTable.name,f.relationColumnName=m.toColumn.name,f.relationDisplayColumns=n.getDisplayableColumns(i[f.relationTableName]),c.push(f)):c.push(f);case 33:p++,t.next=22;break;case 36:return e.insertColumns=c,h={tableId:a.id},t.next=40,W["h"].list("tableFormBuilder",0,999,null,h,null);case 40:b=t.sent,v=b.find((function(e){return"pc"===e.device&&"create"===e.type})),y=[],null!=v&&(y=JSON.parse(v.body),y.forEach((function(e){e.column=a.columns.find((function(t){return t.id===e.columnId}))}))),e.selectedList=y,e.loading=!1,t.next=52;break;case 48:t.prev=48,t.t0=t["catch"](2),e.loading=!1,console.error(t.t0);case 52:case"end":return t.stop()}}),t,null,[[2,48]])})))()},getDisplayableColumns:function(e){var t=e.columns.filter((function(e){return!0===e.displayable}));return t}}},Re=qe,Ne=(n("be59"),n("54e1")),Pe=n("d66b"),De=n("7cbe"),_e=n("52ee"),Ie=n("ca78"),Me=Object(y["a"])(Re,me,he,!1,null,null,null),Ae=Me.exports;Y()(Me,"components",{QBanner:Ne["a"],QBtn:L["a"],QInput:$["a"],QIcon:ie["a"],QEditor:Pe["a"],QPopupProxy:De["a"],QDate:_e["a"],QTime:Ie["a"],QToggle:re["a"]});var Se={install:function(e){e.component("CTableNew",Ae)}},Ee=Se,Be=function(){var e=r()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.Vue,n.use(Ee);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("q-banner",{staticClass:"text-black bg-listcolor",attrs:{"inline-actions":""},scopedSlots:e._u([{key:"action",fn:function(){return[n("q-btn",{attrs:{dense:"",flat:"",unelevated:"",round:"",color:"primary",icon:e.expand?"expand_less":"expand_more"},on:{click:function(t){e.expand=!e.expand}}})]},proxy:!0}])},[e._v("\n      "+e._s(e.tableCaption)+"\n      ")]),n("q-table",{directives:[{name:"show",rawName:"v-show",value:e.expand,expression:"expand"}],attrs:{data:e.qTableData,columns:e.qTableColums,"row-key":e.getRecId,selection:"multiple",selected:e.selected,pagination:e.tablePagination,loading:e.loading,separator:"cell","hide-bottom":"",flat:""},on:{"update:selected":function(t){e.selected=t},"update:pagination":function(t){e.tablePagination=t}},scopedSlots:e._u([{key:"top",fn:function(){return[n("q-btn",{attrs:{disable:0==e.selected.length,dense:"",flat:"",unelevated:"",round:"",color:"negative",icon:"delete_forever"},on:{click:function(t){return e.onDeleteClickAction()}}}),n("q-btn",{attrs:{dense:"",flat:"",unelevated:"",round:"",color:"primary",icon:"add"},on:{click:function(t){return e.onNewClickAction()}}})]},proxy:!0},{key:"body",fn:function(t){return[n("q-tr",{attrs:{props:t}},[n("q-td",[n("q-checkbox",{model:{value:t.selected,callback:function(n){e.$set(t,"selected",n)},expression:"props.selected"}})],1),n("q-td",{key:"dataClickAction",attrs:{props:t}},[n("q-btn",{attrs:{unelevated:"",color:"negative",icon:"delete_forever",flat:"",round:"",dense:""},on:{click:function(n){return e.onDeleteClickAction(t.row)}}}),e.oneToOneMainToSubTables.length+e.oneToManySubTables.length>0?n("q-btn",{attrs:{color:"primary",dense:"",flat:"",unelevated:"",round:"",icon:t.expand?"expand_less":"expand_more"},on:{click:function(e){t.expand=!t.expand}}}):e._e()],1),e._l(e.filterRow(t.row),(function(a,r,o){return n("q-td",{key:o},[e.isHasRelationTableNameByKey(r,t.cols)?n("div",{staticClass:"row items-baseline content-center",staticStyle:{"border-bottom":"1px solid rgba(0,0,0,0.12)"}},[n("div",{staticClass:"col-10"},[n("span",[e._v(e._s(e._f("relationDataFormat")(t.row[r],r,t.cols)))])]),n("div",{staticClass:"col-2"},[n("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"zoom_in"},on:{click:function(n){return e.openDialogClickAction(t,r)}}})],1)]):e.isDateTimeTypeByKey(r,t.cols)?n("q-input",{scopedSlots:e._u([{key:"prepend",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[n("q-popup-proxy",{ref:"qDateProxy",refInFor:!0,attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-date",{attrs:{mask:"YYYY-MM-DD HH:mm:ss"},on:{input:function(t){return e.hideRefPopProxyAction("qDateProxy")}},model:{value:t.row[r],callback:function(n){e.$set(t.row,r,n)},expression:"props.row[colKey]"}})],1)],1)]},proxy:!0},{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[n("q-popup-proxy",{ref:"qTimeProxy",refInFor:!0,attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-time",{attrs:{mask:"YYYY-MM-DD HH:mm:ss",format24h:"","with-seconds":""},on:{input:function(t){return e.hideRefPopProxyAction("qTimeProxy")}},model:{value:t.row[r],callback:function(n){e.$set(t.row,r,n)},expression:"props.row[colKey]"}})],1)],1)]},proxy:!0}],null,!0),model:{value:t.row[r],callback:function(n){e.$set(t.row,r,n)},expression:"props.row[colKey]"}}):e.isDateTypeByKey(r,t.cols)?n("q-input",{scopedSlots:e._u([{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[n("q-popup-proxy",{ref:"qDateProxy",refInFor:!0,attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-date",{attrs:{mask:"YYYY-MM-DD"},on:{input:function(t){return e.hideRefPopProxyAction("qDateProxy")}},model:{value:t.row[r],callback:function(n){e.$set(t.row,r,n)},expression:"props.row[colKey]"}})],1)],1)]},proxy:!0}],null,!0),model:{value:t.row[r],callback:function(n){e.$set(t.row,r,n)},expression:"props.row[colKey]"}}):e.isTimeTypeByKey(r,t.cols)?n("q-input",{scopedSlots:e._u([{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[n("q-popup-proxy",{ref:"qTimeProxy",refInFor:!0,attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-time",{attrs:{mask:"HH:mm:ss",format24h:"","with-seconds":""},on:{input:function(t){return e.hideRefPopProxyAction("qTimeProxy")}},model:{value:t.row[r],callback:function(n){e.$set(t.row,r,n)},expression:"props.row[colKey]"}})],1)],1)]},proxy:!0}],null,!0),model:{value:t.row[r],callback:function(n){e.$set(t.row,r,n)},expression:"props.row[colKey]"}}):e.isNumberTypeByKey(r,t.cols)?n("q-input",{staticStyle:{"min-width":"80px"},attrs:{type:"number"},model:{value:t.row[r],callback:function(n){e.$set(t.row,r,n)},expression:"props.row[colKey]"}}):e.isAttachmentTypeByKey(r,t.cols)?n("CFile",{on:{input:function(e){t.row[r]=e.url}},model:{value:t.row[r],callback:function(n){e.$set(t.row,r,n)},expression:"props.row[colKey]"}}):e.isBoolTypeByKey(r,t.cols)?n("q-toggle",{model:{value:t.row[r],callback:function(n){e.$set(t.row,r,n)},expression:"props.row[colKey]"}}):n("q-input",{staticStyle:{"min-width":"80px"},attrs:{placeholder:e.getPlaceHolderByKey(r,t.cols),type:e.getInputTextType(t,r)},scopedSlots:e._u([e.isPasswordTextType(t,r)?{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.getInputIcon(t,r)},on:{click:function(n){return e.togglePwd(r,t.key)}}})]},proxy:!0}:null],null,!0),model:{value:t.row[r],callback:function(n){e.$set(t.row,r,n)},expression:"props.row[colKey]"}})],1)}))],2),e.oneToOneMainToSubTables.length+e.oneToManySubTables.length>0?n("q-tr",{directives:[{name:"show",rawName:"v-show",value:t.expand,expression:"props.expand"}],attrs:{props:t}},[n("q-td",{attrs:{colspan:"100%"}},[n("div",{staticClass:"text-left"},[e._l(e.oneToOneMainToSubTables,(function(a){return n("div",{key:a.relationName},[n("CTableNew",{ref:e.getRefName("rTableNewRef",a.relationName,t.row),refInFor:!0,attrs:{fkColumnName:a.fkColumnName,tableName:a.tableName}})],1)})),e._l(e.oneToManySubTables,(function(a){return n("div",{key:a.relationName},[n("CTableList",{ref:e.getRefName("rTableListRef",a.relationName,t.row),refInFor:!0,attrs:{fkColumnName:a.fkColumnName,tableName:a.tableName}})],1)}))],2)])],1):e._e()]}}])}),e.qTableData.length>0?n("q-separator"):e._e()],1)},Fe=[],$e=n("448a"),Le=n.n($e),Qe=(n("99af"),n("c740"),n("e9c4"),n("a4d3"),n("e01a"),{name:"CTableList",props:{tableName:{required:!0},fkColumnName:{required:!1,type:String,default:""}},data:function(){return{passwordMap:{},passwordMaps:{},relationMetadataMap:{},tableCaption:"",primaryNames:[],expand:!0,insertColumns:[],relationMap:{},oneToOneMainToSubTables:[],oneToManySubTables:[],qTableData:[],selected:[],loading:!0,pagination:{page:1,rowsPerPage:10,count:0},tablePagination:{rowsPerPage:10},visibleColumns:[],qTableColums:[]}},created:function(){console.info("CTableNew created"),this.init()},mounted:function(){console.info("CTableNew mounted")},activated:function(){console.info("CTableNew->activated")},deactivated:function(){console.info("CTableNew->deactivated")},updated:function(){console.info("CTableNew->updated")},destroyed:function(){console.info("CTableNew->destroyed")},filters:{relationDataFormat:function(e,t,n){var a=n.find((function(e){return e.name===t}));if(a&&e){if(a.relationDisplayColumns.length>0){var r=[];return a.relationDisplayColumns.forEach((function(t){r.push(e[t.name])})),r.join("|")}return e[a.relationColumnName]}return null}},computed:{},methods:{init:function(e){var t=this;return r()(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.insertColumns=[],e.next=3,t.loadMeta();case 3:case"end":return e.stop()}}),e)})))()},filterRow:function(e){var t={};for(var n in e)"id"!=n&&(t[n]=e[n]);return t},isHasRelationTableNameByKey:function(e,t){var n=t.find((function(t){return t.name===e}));return!!n.relationTableName},isDateTimeTypeByKey:function(e,t){var n=t.find((function(t){return t.name===e}));return!(!n||"DATETIME"!==n.dataType)},isDateTypeByKey:function(e,t){var n=t.find((function(t){return t.name===e}));return!(!n||"DATE"!==n.dataType)},isTimeTypeByKey:function(e,t){var n=t.find((function(t){return t.name===e}));return!(!n||"TIME"!==n.dataType)},isNumberTypeByKey:function(e,t){var n=t.find((function(t){return t.name===e}));return!(!n||"TINYINT"!==n.dataType&&"SMALLINT"!==n.dataType&&"MEDIUMINT"!==n.dataType&&"INT"!==n.dataType&&"BIGINT"!==n.dataType)},isBoolTypeByKey:function(e,t){var n=t.find((function(t){return t.name===e}));return!(!n||"BOOL"!==n.dataType)},isAttachmentTypeByKey:function(e,t){var n=t.find((function(t){return t.name===e}));return!(!n||"ATTACHMENT"!==n.dataType)},togglePwd:function(e,t){var n=Object(A["a"])(!0,{},this.passwordMaps),a=n[t];a[e].isPwd=!a[e].isPwd,this.passwordMaps=n},getPlaceHolderByKey:function(e,t){var n=t.find((function(t){return t.name===e}));return n?n.placeHolder:null},addRow:function(){console.log("CTableList-> addRow");var e=this.qTableData.length+1,t={};this.insertColumns.forEach((function(e){t[e.name]=e.value})),this.qTableData=[].concat(Le()(this.qTableData.slice(0,e)),[t],Le()(this.qTableData.slice(e)));var n=this.getRecIdByDataMap(t);this.passwordMaps[n]=Object(A["a"])(!0,{},this.passwordMap)},removeRow:function(e){var t=this,n=this.qTableData.findIndex((function(n){return t.getRecId(n)===e}));n>=0&&(this.qTableData=[].concat(Le()(this.qTableData.slice(0,n)),Le()(this.qTableData.slice(n+1)))),delete this.passwordMaps[e]},batchRemoveRow:function(e){var t=this;e.forEach((function(e){t.removeRow(e)}))},onNewClickAction:function(){this.addRow()},onDeleteClickAction:function(e){var t=this;return r()(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=[],t.selected.forEach((function(e){a.push(t.getRecId(e))})),console.info(JSON.stringify(a)),e?t.removeRow(t.getRecId(e)):(t.batchRemoveRow(a),t.selected=[]);case 4:case"end":return n.stop()}}),n)})))()},getData:function(){var e=this,t=[],n=this;return this.qTableData.forEach((function(a){var r={};for(var o in a){var i=a[o],s=e.relationMap[o];s?(r[s.name]=i,r[o]=i&&i[s.toColumn.name]):void 0!=i&&null!=i&&""!==i.toString().trim()&&(r[o]=i)}n.oneToOneMainToSubTables.forEach((function(t){var a="rTableNewRef"+t.relationName+e.getRecId(r);console.dir(a);var o=n.$refs[a];console.dir(o);var i=o[0].getData();r[t.relationName]=i})),n.oneToManySubTables.forEach((function(t){var a="rTableListRef"+t.relationName+e.getRecId(r);console.dir(a);var o=n.$refs[a];console.dir(o);var i=o[0].getData();r[t.relationName]=i})),delete r.createdDate,delete r.lastModifiedDate,t.push(r)})),console.dir(t),t},hideRefPopProxyAction:function(e){for(var t=this.$refs[e],n=0;n<t.length;n++)t[n].hide()},getInputTextType:function(e,t){return this.passwordMaps[e.key]&&this.passwordMaps[e.key][t].isPwd?"password":"text"},isPasswordTextType:function(e,t){return!(!this.passwordMaps[e.key]||!this.passwordMaps[e.key][t].isPwd)},getInputIcon:function(e,t){return this.passwordMaps[e.key]&&this.passwordMaps[e.key][t].isPwd?"visibility_off":"visibility"},getRefName:function(e,t,n){var a=e+t+this.getRecId(n);return console.log(a),a},getRecId:function(e){if(1===this.primaryNames.length)return e[this.primaryNames[0]];var t=[];this.primaryNames.forEach((function(n){t.push(n+"="+e[n])}));var n=t.join(",");return console.log(n),n},getRecIdByDataMap:function(e){var t=this.primaryNames;if(1===t.length)return e[t[0]];var n=[];t.forEach((function(t){n.push(t+"="+e[t])}));var a=n.join(",");return console.log(a),a},openDialogClickAction:function(e,t){var n=e.cols.find((function(e){return e.name===t})),a=e.row;this.$q.dialog({component:Ce,parent:this,tableName:n.relationTableName,data:a[t]}).onOk((function(e){a[t]=e})).onCancel((function(){console.log("Cancel")})).onDismiss((function(){console.log("Called on OK or Cancel")}))},loadMeta:function(){var e=this;return r()(regeneratorRuntime.mark((function t(){var n,a,o,i,s,u,l,c,p,f,d,m,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e,e.loading=!0,t.prev=2,t.next=5,W["e"].getByName(e.tableName);case 5:return a=t.sent,e.tableCaption=a.caption,e.primaryNames=a.primaryNames,t.next=10,W["c"].getByName(e.tableName);case 10:return o=t.sent,i={},t.next=14,Promise.all(o.map(function(){var e=r()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,W["e"].getByName(t.toTable.name);case 2:n=e.sent,i[t.toTable.name]=n;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 14:e.relationMetadataMap=i,s={},u=[],l=[],o.forEach((function(e){if("OneToOneMainToSub"===e.relationType)u.push({relationName:e.name,tableName:e.toTable.name,fkColumnName:e.toColumn.name});else if("OneToMany"===e.relationType)l.push({relationName:e.name,tableName:e.toTable.name,fkColumnName:e.toColumn.name});else if("ManyToOne"===e.relationType||"OneToOneSubToMain"===e.relationType){var t=e.fromColumn.name;s[t]=e}})),e.oneToOneMainToSubTables=u,e.oneToManySubTables=l,e.relationMap=s,c=[],p=0;case 24:if(!(p<a.columns.length)){t.next=37;break}if(f=a.columns[p],!f.insertable){t.next=34;break}if(d=f.name,!e.fkColumnName||d!==e.fkColumnName){t.next=30;break}return t.abrupt("continue",34);case 30:"true"===f.defaultValue?f.value=!0:"false"===f.defaultValue?f.value=!1:f.value=f.defaultValue,"PASSWORD"===f.dataType?(f.isText=!1,f.isPwd=!0):(f.isText=!0,f.isPwd=!1),m=e.relationMap[d],m?(f.relationTableName=m.toTable.name,f.relationColumnName=m.toColumn.name,f.relationDisplayColumns=n.getDisplayableColumns(i[f.relationTableName]),c.push(f)):c.push(f);case 34:p++,t.next=24;break;case 37:e.insertColumns=c,h=[],h.push({name:"dataClickAction",align:"center",label:"操作",field:"dataClickAction",sortable:!0}),c.forEach((function(t){e.passwordMap[t.name]={isPwd:t.isPwd,isText:t.isText},h.push({name:t.name,align:"left",label:t.caption,field:t.name,dataType:t.dataType,sortable:!1,placeHolder:t.description,relationTableName:t.relationTableName,relationColumnName:t.relationColumnName,relationDisplayColumns:t.relationDisplayColumns,isPwd:t.isPwd,isText:t.isText})})),e.qTableColums=h,e.loading=!1,t.next=49;break;case 45:t.prev=45,t.t0=t["catch"](2),e.loading=!1,console.error(t.t0);case 49:case"end":return t.stop()}}),t,null,[[2,45]])})))()},getDisplayableColumns:function(e){var t=e.columns.filter((function(e){return!0===e.displayable}));return t}}}),Ye=Qe,Ke=(n("55af"),n("eaac")),He=n("bd08"),je=n("db86"),Ue=n("8f8e"),ze=n("eb85"),Ve=Object(y["a"])(Ye,Oe,Fe,!1,null,null,null),Je=Ve.exports;Y()(Ve,"components",{QBanner:Ne["a"],QBtn:L["a"],QTable:Ke["a"],QTr:He["a"],QTd:je["a"],QCheckbox:Ue["a"],QInput:$["a"],QIcon:ie["a"],QPopupProxy:De["a"],QDate:_e["a"],QTime:Ie["a"],QToggle:re["a"],QSeparator:ze["a"]});var Xe={install:function(e){e.component("CTableList",Je)}},Ge=Xe,We=function(){var e=r()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.Vue,n.use(Ge);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ze=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("q-banner",{staticClass:"q-mb-md text-black bg-listcolor",attrs:{"inline-actions":""},scopedSlots:e._u([{key:"action",fn:function(){return[n("q-btn",{attrs:{dense:"",flat:"",unelevated:"",round:"",color:"primary",icon:e.expand?"expand_less":"expand_more"},on:{click:function(t){e.expand=!e.expand}}})]},proxy:!0}])},[e._v("\n    "+e._s(e.tableCaption)+"\n    ")]),n("form",{directives:[{name:"show",rawName:"v-show",value:e.expand,expression:"expand"}],staticClass:"q-pb-md",on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.onSubmit.apply(null,arguments)}}},[e.selectedList.length>0?n("div",{staticClass:"row"},e._l(e.selectedList,(function(t){return n("div",{key:t.columnId,staticClass:"list-group-item q-pa-md",class:e._f("classFormat")(t)},[n("div",[n("div",{class:{required:t.column.updatable&&!t.column.nullable}},[e._v("\n            "+e._s(t.column.caption)+":\n          ")]),t.column.updatable?n("div",[t.column.relationTableName?n("div",{staticClass:"row items-baseline content-center",staticStyle:{"border-bottom":"1px solid rgba(0,0,0,0.12)"}},[n("div",{staticClass:"col-11"},[n("span",[e._v(e._s(e._f("relationDataFormat")(t.column.value,t.column)))])]),n("div",{staticClass:"col-1"},[n("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"zoom_in"},on:{click:function(n){return e.openDialogClickAction(t.column)}}})],1)]):e.isStringType(t.column.dataType)?n("q-input",{attrs:{placeholder:t.column.description,type:t.isPwd?"password":"text"},scopedSlots:e._u([t.isText?null:{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.isPwd?"visibility_off":"visibility"},on:{click:function(e){t.isPwd=!t.isPwd}}})]},proxy:!0}],null,!0),model:{value:t.column.value,callback:function(n){e.$set(t.column,"value",n)},expression:"formElement.column.value"}}):e.isTextType(t.column.dataType)?n("q-editor",{attrs:{placeholder:t.column.description},model:{value:t.column.value,callback:function(n){e.$set(t.column,"value",n)},expression:"formElement.column.value"}}):e.isDateTimeType(t.column.dataType)?n("q-input",{scopedSlots:e._u([{key:"prepend",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[n("q-popup-proxy",{ref:"qDateProxy",refInFor:!0,attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-date",{attrs:{mask:"YYYY-MM-DD HH:mm:ss"},on:{input:function(t){return e.hideRefPopProxyAction("qDateProxy")}},model:{value:t.column.value,callback:function(n){e.$set(t.column,"value",n)},expression:"formElement.column.value"}})],1)],1)]},proxy:!0},{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[n("q-popup-proxy",{ref:"qTimeProxy",refInFor:!0,attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-time",{attrs:{mask:"YYYY-MM-DD HH:mm:ss",format24h:"","with-seconds":""},on:{input:function(t){return e.hideRefPopProxyAction("qTimeProxy")}},model:{value:t.column.value,callback:function(n){e.$set(t.column,"value",n)},expression:"formElement.column.value"}})],1)],1)]},proxy:!0}],null,!0),model:{value:t.column.value,callback:function(n){e.$set(t.column,"value",n)},expression:"formElement.column.value"}}):e.isDateType(t.column.dataType)?n("q-input",{scopedSlots:e._u([{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[n("q-popup-proxy",{ref:"qDateProxy",refInFor:!0,attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-date",{attrs:{mask:"YYYY-MM-DD"},on:{input:function(t){return e.hideRefPopProxyAction("qDateProxy")}},model:{value:t.column.value,callback:function(n){e.$set(t.column,"value",n)},expression:"formElement.column.value"}})],1)],1)]},proxy:!0}],null,!0),model:{value:t.column.value,callback:function(n){e.$set(t.column,"value",n)},expression:"formElement.column.value"}}):e.isTimeType(t.column.dataType)?n("q-input",{scopedSlots:e._u([{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[n("q-popup-proxy",{ref:"qTimeProxy",refInFor:!0,attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-time",{attrs:{mask:"HH:mm:ss",format24h:"","with-seconds":""},on:{input:function(t){return e.hideRefPopProxyAction("qTimeProxy")}},model:{value:t.column.value,callback:function(n){e.$set(t.column,"value",n)},expression:"formElement.column.value"}})],1)],1)]},proxy:!0}],null,!0),model:{value:t.column.value,callback:function(n){e.$set(t.column,"value",n)},expression:"formElement.column.value"}}):e.isBoolType(t.column.dataType)?n("q-toggle",{model:{value:t.column.value,callback:function(n){e.$set(t.column,"value",n)},expression:"formElement.column.value"}}):e.isNumberType(t.column.dataType)?n("q-input",{attrs:{placeholder:t.column.description,type:"number"},model:{value:t.column.value,callback:function(n){e.$set(t.column,"value",n)},expression:"formElement.column.value"}}):e.isAttachmentType(t.column.dataType)?n("CFile",{on:{input:function(e){t.column.value=e.url}},model:{value:t.column.value,callback:function(n){e.$set(t.column,"value",n)},expression:"formElement.column.value"}}):n("q-input",{attrs:{placeholder:t.column.description,type:t.isPwd?"password":"text"},scopedSlots:e._u([t.isText?null:{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.isPwd?"visibility_off":"visibility"},on:{click:function(e){t.isPwd=!t.isPwd}}})]},proxy:!0}],null,!0),model:{value:t.column.value,callback:function(n){e.$set(t.column,"value",n)},expression:"formElement.column.value"}})],1):n("div",["TIME"===t.column.dataType?n("span",[e._v("\n                "+e._s(t.column.value)+"\n            ")]):"DATE"===t.column.dataType?n("span",[e._v("\n                "+e._s(e._f("dateFormat")(t.column.value))+"\n            ")]):"DATETIME"===t.column.dataType?n("span",[e._v("\n                "+e._s(e._f("dateTimeFormat")(t.column.value))+"\n            ")]):n("span",[e._v("\n                "+e._s(e._f("dataFormat")(t.column.value))+"\n            ")])])])])})),0):n("div",e._l(e.insertColumns,(function(t){return n("div",{key:t.name,staticClass:"row items-baseline content-center justify-start q-pb-md"},[n("div",{staticClass:"col-3 text-right text-subtitle2 q-pr-md query-cond",class:{required:t.updatable&&!t.nullable}},[e._v("\n        "+e._s(t.caption)+":")]),t.updatable?n("div",{staticClass:"col-7"},[t.relationTableName?n("div",{staticClass:"row items-baseline content-center",staticStyle:{"border-bottom":"1px solid rgba(0,0,0,0.12)"}},[n("div",{staticClass:"col-11"},[n("span",[e._v(e._s(e._f("relationDataFormat")(t.value,t)))])]),n("div",{staticClass:"col-1"},[n("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"zoom_in"},on:{click:function(n){return e.openDialogClickAction(t)}}})],1)]):e.isDateTimeType(t.dataType)?n("q-input",{scopedSlots:e._u([{key:"prepend",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[n("q-popup-proxy",{ref:"qDateProxy",refInFor:!0,attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-date",{attrs:{mask:"YYYY-MM-DD HH:mm:ss"},on:{input:function(t){return e.hideRefPopProxyAction("qDateProxy")}},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1)],1)]},proxy:!0},{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[n("q-popup-proxy",{ref:"qTimeProxy",refInFor:!0,attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-time",{attrs:{mask:"YYYY-MM-DD HH:mm:ss",format24h:"","with-seconds":""},on:{input:function(t){return e.hideRefPopProxyAction("qTimeProxy")}},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1)],1)]},proxy:!0}],null,!0),model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}}):e.isDateType(t.dataType)?n("q-input",{scopedSlots:e._u([{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[n("q-popup-proxy",{ref:"qDateProxy",refInFor:!0,attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-date",{attrs:{mask:"YYYY-MM-DD"},on:{input:function(t){return e.hideRefPopProxyAction("qDateProxy")}},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1)],1)]},proxy:!0}],null,!0),model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}}):e.isTimeType(t.dataType)?n("q-input",{attrs:{mask:"fulltime",rules:["fulltime"]},scopedSlots:e._u([{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[n("q-popup-proxy",{ref:"qTimeProxy",refInFor:!0,attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-time",{attrs:{format24h:"","with-seconds":""},on:{input:function(t){return e.hideRefPopProxyAction("qTimeProxy")}},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1)],1)]},proxy:!0}],null,!0),model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}}):e.isBoolType(t.dataType)?n("q-toggle",{model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}}):e.isNumberType(t.dataType)?n("q-input",{attrs:{placeholder:t.description,type:"number"},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}}):e.isAttachmentType(t.dataType)?n("CFile",{on:{input:function(e){t.value=e.url}},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}}):e.isTextType(t.dataType)?n("q-editor",{attrs:{placeholder:t.description},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}}):n("q-input",{attrs:{placeholder:t.description,type:t.isPwd?"password":"text"},scopedSlots:e._u([t.isText?null:{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.isPwd?"visibility_off":"visibility"},on:{click:function(e){t.isPwd=!t.isPwd}}})]},proxy:!0}],null,!0),model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1):n("div",{staticClass:"col-7"},["TIME"===t.dataType?n("span",[e._v("\n              "+e._s(t.value)+"\n          ")]):"DATE"===t.dataType?n("span",[e._v("\n              "+e._s(e._f("dateFormat")(t.value))+"\n          ")]):"DATETIME"===t.dataType?n("span",[e._v("\n              "+e._s(e._f("dateTimeFormat")(t.value))+"\n          ")]):n("span",[e._v("\n              "+e._s(e._f("dataFormat")(t.value))+"\n          ")])])])})),0)]),e._l(e.oneToOneMainToSubTables,(function(e){return n("div",{key:e.relationName},[e.recId?n("CTableEdit",{ref:"rTableNewOrEditRef"+e.relationName,refInFor:!0,attrs:{recId:e.recId,fkColumnName:e.fkColumnName,tableName:e.tableName}}):n("CTableNew",{ref:"rTableNewOrEditRef"+e.relationName,refInFor:!0,attrs:{fkColumnName:e.fkColumnName,tableName:e.tableName}})],1)})),e._l(e.oneToManySubTables,(function(e){return n("div",{key:e.relationName},[e.recIds.length>0?n("CTableListEdit",{ref:"rTableListRef"+e.relationName,refInFor:!0,attrs:{recIds:e.recIds,fkColumnName:e.fkColumnName,tableName:e.tableName}}):n("CTableList",{ref:"rTableListRef"+e.relationName,refInFor:!0,attrs:{fkColumnName:e.fkColumnName,tableName:e.tableName}})],1)}))],2)},et=[],tt=n("ed08"),nt={name:"CTableEdit",props:{tableName:{required:!0},fkColumnName:{required:!1,type:String,default:""},recId:{required:!0}},data:function(){return{tableData:{},loading:!0,expand:!0,tableCaption:"",insertColumns:[],relationMap:{},oneToOneMainToSubTables:[],oneToManySubTables:[],selectedList:[]}},created:function(){var e=this;return r()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.info("CTableEdit created"),t.next=3,e.init();case 3:case"end":return t.stop()}}),t)})))()},mounted:function(){console.info("CTableEdit mounted")},activated:function(){console.info("CTableEdit->activated")},deactivated:function(){console.info("CTableEdit->deactivated")},updated:function(){console.info("CTableEdit->updated")},destroyed:function(){console.info("CTableEdit->destroyed")},beforeRouteUpdate:function(e,t,n){return r()(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.info("CTableEdit beforeRouteUpdate");case 1:case"end":return e.stop()}}),e)})))()},filters:{dateTimeFormat:function(e){return tt["a"].dateTimeFormat(e)},dateFormat:function(e){return tt["a"].dateFormat(e)},timeFormat:function(e){return tt["a"].timeFormat(e)},dataFormat:function(e){return e&&e.name?e.name:e},relationDataFormat:function(e,t){console.log("relationDataFormat:"+JSON.stringify(e));var n=e;if(e)if(t.relationDisplayColumns.length>0){var a=[];t.relationDisplayColumns.forEach((function(t){e[t.name]&&a.push(e[t.name])})),n=a.length>0?a.join("|"):e[t.relationColumnName]}else n=e[t.relationColumnName];return n||e},classFormat:function(e){var t="";return e.width&&(t="col-"+e.width),t}},computed:{},methods:{init:function(e){var t=this;return r()(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.insertColumns=[],e.next=3,t.loadMeta();case 3:case"end":return e.stop()}}),e)})))()},isTextType:function(e){return"TEXT"===e||"LONGTEXT"===e},isStringType:function(e){return"CHAR"===e||"VARCHAR"===e},isNumberType:function(e){return"TINYINT"===e||"SMALLINT"===e||"MEDIUMINT"===e||"INT"===e||"BIGINT"===e},isDateType:function(e){return"DATE"===e},isTimeType:function(e){return"TIME"===e},isDateTimeType:function(e){return"DATETIME"===e},isBoolType:function(e){return"BOOL"===e},isAttachmentType:function(e){return"ATTACHMENT"===e},getData:function(){for(var e=this,t={},n=0;n<this.insertColumns.length;n++){var a=this.insertColumns[n],r=a.name;if("createdDate"!==r&&"lastModifiedDate"!==r){var o=this.relationMap[r];o?(t[r]=a.value&&a.value[a.relationColumnName],t[o.name]=a.value):void 0!=a.value&&null!=a.value&&""!==a.value.toString().trim()&&(t[r]=a.value)}}return this.oneToOneMainToSubTables.forEach((function(n){var a=e.$refs["rTableNewOrEditRef"+n.relationName],r=a[0].getData();t[n.relationName]=r})),this.oneToManySubTables.forEach((function(n){var a=e.$refs["rTableListRef"+n.relationName],r=a[0].getData();t[n.relationName]=r})),t},hideRefPopProxyAction:function(e){for(var t=this.$refs[e],n=0;n<t.length;n++)t[n].hide()},getRecId:function(e,t){console.log("getRecId");var n=e.primaryNames;if(1===n.length)return t[n[0]];var a=[];n.forEach((function(e){a.push(e+"="+t[e])}));var r=a.join(",");return console.log(r),r},openDialogClickAction:function(e){this.$q.dialog({component:Ce,parent:this,tableName:e.relationTableName,data:e.value}).onOk((function(t){e.value=t})).onCancel((function(){console.log("Cancel")})).onDismiss((function(){console.log("Called on OK or Cancel")}))},loadMeta:function(){var e=this;return r()(regeneratorRuntime.mark((function t(){var n,a,o,i,s,u,l,c,p,f,d,m,h,b,v,y,g,w;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.info("CTableEdit loadMeta"),n=e,e.loading=!0,e.insertColumns=[],t.prev=4,t.next=7,W["e"].getByName(e.tableName);case 7:return a=t.sent,e.tableCaption=a.caption,t.next=11,W["c"].getByName(e.tableName);case 11:return o=t.sent,i={},t.next=15,Promise.all(o.map(function(){var e=r()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,W["e"].getByName(t.toTable.name);case 2:n=e.sent,i[t.toTable.name]=n;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 15:return t.next=17,W["h"].get(e.tableName,e.recId);case 17:s=t.sent,e.tableData=s,u={},l=[],c=[],o.forEach((function(e){if("OneToOneMainToSub"===e.relationType){var t=null;s[e.name]&&(t=n.getRecId(i[e.toTable.name],s[e.name]),console.dir(t)),l.push({relationName:e.name,tableName:e.toTable.name,fkColumnName:e.toColumn.name,recId:t})}else if("OneToMany"===e.relationType){var a=[];s[e.name]&&s[e.name].forEach((function(t){a.push(n.getRecId(i[e.toTable.name],t))})),console.dir(a),c.push({relationName:e.name,tableName:e.toTable.name,fkColumnName:e.toColumn.name,recIds:a})}else if("ManyToOne"===e.relationType||"OneToOneSubToMain"===e.relationType){var r=e.fromColumn.name;u[r]=e}})),e.oneToOneMainToSubTables=l,e.oneToManySubTables=c,e.relationMap=u,p=[],f=0;case 28:if(!(f<a.columns.length)){t.next=43;break}if(d=a.columns[f],m=d.name,"FULLTEXT"!==d.indexType){t.next=33;break}return t.abrupt("continue",40);case 33:if(!e.fkColumnName||m!==e.fkColumnName){t.next=35;break}return t.abrupt("continue",40);case 35:"PASSWORD"===d.dataType?(d.isText=!1,d.isPwd=!0):(d.isText=!0,d.isPwd=!1),h=s[m],"DATE"===d.dataType&&h?d.value=tt["a"].dateFormat(h):"DATETIME"===d.dataType&&h?d.value=tt["a"].dateTimeFormat(h):d.value=h,b=e.relationMap[m],b?(d.relationTableName=b.toTable.name,d.relationColumnName=b.toColumn.name,d.relationDisplayColumns=n.getDisplayableColumns(i[d.relationTableName]),d.value=s[b.name],p.push(d)):p.push(d);case 40:f++,t.next=28;break;case 43:return e.insertColumns=p,v={tableId:a.id},t.next=47,W["h"].list("tableFormBuilder",0,999,null,v,null);case 47:y=t.sent,g=y.find((function(e){return"pc"===e.device&&"update"===e.type})),w=[],null!=g&&(w=JSON.parse(g.body),w.forEach((function(e){e.column=a.columns.find((function(t){return t.id===e.columnId}))}))),e.selectedList=w,e.loading=!1,t.next=59;break;case 55:t.prev=55,t.t0=t["catch"](4),e.loading=!1,console.error(t.t0);case 59:case"end":return t.stop()}}),t,null,[[4,55]])})))()},getDisplayableColumns:function(e){var t=e.columns.filter((function(e){return!0===e.displayable}));return t}}},at=nt,rt=(n("3ce4"),Object(y["a"])(at,Ze,et,!1,null,null,null)),ot=rt.exports;Y()(rt,"components",{QBanner:Ne["a"],QBtn:L["a"],QInput:$["a"],QIcon:ie["a"],QEditor:Pe["a"],QPopupProxy:De["a"],QDate:_e["a"],QTime:Ie["a"],QToggle:re["a"]});var it={install:function(e){e.component("CTableEdit",ot)}},st=it,ut=function(){var e=r()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.Vue,n.use(st);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),lt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("q-banner",{staticClass:"text-black bg-listcolor",attrs:{"inline-actions":""},scopedSlots:e._u([{key:"action",fn:function(){return[n("q-btn",{attrs:{dense:"",flat:"",unelevated:"",round:"",color:"primary",icon:e.expand?"expand_less":"expand_more"},on:{click:function(t){e.expand=!e.expand}}})]},proxy:!0}])},[e._v("\n      "+e._s(e.tableCaption)+"\n      ")]),n("q-table",{directives:[{name:"show",rawName:"v-show",value:e.expand,expression:"expand"}],attrs:{data:e.qTableData,columns:e.qTableColums,"row-key":e.getRecId,selection:"multiple",selected:e.selected,pagination:e.tablePagination,loading:e.loading,separator:"cell","hide-bottom":"",flat:""},on:{"update:selected":function(t){e.selected=t},"update:pagination":function(t){e.tablePagination=t}},scopedSlots:e._u([{key:"top",fn:function(){return[n("q-btn",{attrs:{disable:0==e.selected.length,dense:"",flat:"",unelevated:"",round:"",color:"negative",icon:"delete_forever"},on:{click:function(t){return e.onDeleteClickAction()}}}),n("q-btn",{attrs:{dense:"",flat:"",unelevated:"",round:"",color:"primary",icon:"add"},on:{click:function(t){return e.onNewClickAction()}}})]},proxy:!0},{key:"body",fn:function(t){return[n("q-tr",{attrs:{props:t}},[n("q-td",[n("q-checkbox",{model:{value:t.selected,callback:function(n){e.$set(t,"selected",n)},expression:"props.selected"}})],1),n("q-td",{key:"dataClickAction",attrs:{props:t}},[n("q-btn",{attrs:{unelevated:"",color:"negative",icon:"delete_forever",flat:"",round:"",dense:""},on:{click:function(n){return e.onDeleteClickAction(t.row)}}}),e.oneToOneMainToSubTables.length+e.oneToManySubTables.length>0?n("q-btn",{attrs:{color:"primary",dense:"",flat:"",unelevated:"",round:"",icon:t.expand?"expand_less":"expand_more"},on:{click:function(e){t.expand=!t.expand}}}):e._e()],1),e._l(e.filterRow(t.row),(function(a,r,o){return n("q-td",{key:o},[e.isUpdatableByKey(r,t.cols)?e.isHasRelationTableNameByKey(r,t.cols)?n("div",{staticClass:"row items-baseline content-center",staticStyle:{"border-bottom":"1px solid rgba(0,0,0,0.12)"}},[n("div",{staticClass:"col-10"},[n("span",[e._v(e._s(e._f("relationDataFormat")(t.row[r],r,t.cols)))])]),n("div",{staticClass:"col-2"},[n("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"zoom_in"},on:{click:function(n){return e.openDialogClickAction(t,r)}}})],1)]):e.isDateTimeTypeByKey(r,t.cols)?n("q-input",{scopedSlots:e._u([{key:"prepend",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[n("q-popup-proxy",{ref:"qDateProxy",refInFor:!0,attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-date",{attrs:{mask:"YYYY-MM-DD HH:mm:ss"},on:{input:function(t){return e.hideRefPopProxyAction("qDateProxy")}},model:{value:t.row[r],callback:function(n){e.$set(t.row,r,n)},expression:"props.row[colKey]"}})],1)],1)]},proxy:!0},{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[n("q-popup-proxy",{ref:"qTimeProxy",refInFor:!0,attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-time",{attrs:{mask:"YYYY-MM-DD HH:mm:ss",format24h:"","with-seconds":""},on:{input:function(t){return e.hideRefPopProxyAction("qTimeProxy")}},model:{value:t.row[r],callback:function(n){e.$set(t.row,r,n)},expression:"props.row[colKey]"}})],1)],1)]},proxy:!0}],null,!0),model:{value:t.row[r],callback:function(n){e.$set(t.row,r,n)},expression:"props.row[colKey]"}}):e.isDateTypeByKey(r,t.cols)?n("q-input",{scopedSlots:e._u([{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[n("q-popup-proxy",{ref:"qDateProxy",refInFor:!0,attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-date",{attrs:{mask:"YYYY-MM-DD"},on:{input:function(t){return e.hideRefPopProxyAction("qDateProxy")}},model:{value:t.row[r],callback:function(n){e.$set(t.row,r,n)},expression:"props.row[colKey]"}})],1)],1)]},proxy:!0}],null,!0),model:{value:t.row[r],callback:function(n){e.$set(t.row,r,n)},expression:"props.row[colKey]"}}):e.isTimeTypeByKey(r,t.cols)?n("q-input",{scopedSlots:e._u([{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[n("q-popup-proxy",{ref:"qTimeProxy",refInFor:!0,attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-time",{attrs:{mask:"HH:mm:ss",format24h:"","with-seconds":""},on:{input:function(t){return e.hideRefPopProxyAction("qTimeProxy")}},model:{value:t.row[r],callback:function(n){e.$set(t.row,r,n)},expression:"props.row[colKey]"}})],1)],1)]},proxy:!0}],null,!0),model:{value:t.row[r],callback:function(n){e.$set(t.row,r,n)},expression:"props.row[colKey]"}}):e.isNumberTypeByKey(r,t.cols)?n("q-input",{staticStyle:{"min-width":"80px"},attrs:{type:"number"},model:{value:t.row[r],callback:function(n){e.$set(t.row,r,n)},expression:"props.row[colKey]"}}):e.isAttachmentTypeByKey(r,t.cols)?n("CFile",{on:{input:function(e){t.row[r]=e.url}},model:{value:t.row[r],callback:function(n){e.$set(t.row,r,n)},expression:"props.row[colKey]"}}):e.isBoolTypeByKey(r,t.cols)?n("q-toggle",{model:{value:t.row[r],callback:function(n){e.$set(t.row,r,n)},expression:"props.row[colKey]"}}):n("q-input",{staticStyle:{"min-width":"80px"},attrs:{placeholder:e.getPlaceHolderByKey(r,t.cols),type:e.getInputTextType(t,r)},scopedSlots:e._u([e.isPasswordTextType(t,r)?{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.getInputIcon(t,r)},on:{click:function(n){return e.togglePwd(r,t.key)}}})]},proxy:!0}:null],null,!0),model:{value:t.row[r],callback:function(n){e.$set(t.row,r,n)},expression:"props.row[colKey]"}}):n("span",[e._v("\n              "+e._s(e._f("dataFormat")(a,r,t.cols))+"\n            ")])],1)}))],2),e.oneToOneMainToSubTables.length+e.oneToManySubTables.length>0?n("q-tr",{directives:[{name:"show",rawName:"v-show",value:t.expand,expression:"props.expand"}],attrs:{props:t}},[n("q-td",{attrs:{colspan:"100%"}},[n("div",{staticClass:"text-left"},[e._l(e.oneToOneMainToSubTables,(function(a){return n("div",{key:a.relationName},[e.isExistCTableEdit(a.recIdMap,t.row)?n("CTableEdit",{ref:e.getRefName("rTableNewOrEditRef",a.relationName,t.row),refInFor:!0,attrs:{recId:e.getCTableEditRecId(a.recIdMap,t.row),fkColumnName:a.fkColumnName,tableName:a.tableName}}):n("CTableNew",{ref:e.getRefName("rTableNewOrEditRef",a.relationName,t.row),refInFor:!0,attrs:{fkColumnName:a.fkColumnName,tableName:a.tableName}})],1)})),e._l(e.oneToManySubTables,(function(a){return n("div",{key:a.relationName},[e.isExistCTableListEdit(a.recIdsMap,t.row)?n("CTableListEdit",{ref:e.getRefName("rTableListRef",a.relationName,t.row),refInFor:!0,attrs:{recIds:e.getCTableListEditRecIds(a.recIdsMap,t.row),fkColumnName:a.fkColumnName,tableName:a.tableName}}):n("CTableList",{ref:e.getRefName("rTableListRef",a.relationName,t.row),refInFor:!0,attrs:{fkColumnName:a.fkColumnName,tableName:a.tableName}})],1)}))],2)])],1):e._e()]}}])}),e.qTableData.length>0?n("q-separator"):e._e()],1)},ct=[],pt={name:"CTableListEdit",props:{tableName:{required:!0},fkColumnName:{required:!1,type:String,default:""},recIds:{type:Array}},data:function(){return{passwordMap:{},passwordMaps:{},relationMetadataMap:{},tableCaption:"",primaryNames:[],expand:!0,insertColumns:[],relationMap:{},oneToOneMainToSubTables:[],oneToManySubTables:[],qTableData:[],selected:[],loading:!0,pagination:{page:1,rowsPerPage:100,count:0},tablePagination:{rowsPerPage:100},visibleColumns:[],qTableColums:[]}},created:function(){console.info("CTableNew created"),this.init()},mounted:function(){console.info("CTableNew mounted")},activated:function(){console.info("CTableNew->activated")},deactivated:function(){console.info("CTableNew->deactivated")},updated:function(){console.info("CTableNew->updated")},destroyed:function(){console.info("CTableNew->destroyed")},filters:{dateTimeFormat:function(e){return tt["a"].dateTimeFormat(e)},dateFormat:function(e){return tt["a"].dateFormat(e)},timeFormat:function(e){return tt["a"].timeFormat(e)},dataFormat:function(e,t,n){var a=n.find((function(e){return e.name===t}));if(a){if("DATETIME"===a.dataType)return tt["a"].dateTimeFormat(e);if("DATE"===a.dataType)return tt["a"].dateFormat(e);if("TIME"===a.dataType)return tt["a"].timeFormat(e)}return e&&e.name?e.name:e},relationDataFormat:function(e,t,n){console.log("relationDataFormat:"+JSON.stringify(e));var a=n.find((function(e){return e.name===t})),r=e;if(e)if(a.relationDisplayColumns.length>0){var o=[];a.relationDisplayColumns.forEach((function(t){e[t.name]&&o.push(e[t.name])})),r=o.length>0?o.join("|"):e[a.relationColumnName]}else r=e[a.relationColumnName];return r||e}},computed:{},methods:{init:function(e){var t=this;return r()(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.insertColumns=[],e.next=3,t.loadMeta();case 3:case"end":return e.stop()}}),e)})))()},filterRow:function(e){var t={};return this.insertColumns.forEach((function(n){t[n.name]=e[n.name]})),t},isHasRelationTableNameByKey:function(e,t){var n=t.find((function(t){return t.name===e}));return!!n.relationTableName},isUpdatableByKey:function(e,t){var n=t.find((function(t){return t.name===e}));return!!n&&n.updatable},isDateTimeTypeByKey:function(e,t){var n=t.find((function(t){return t.name===e}));return!(!n||"DATETIME"!==n.dataType)},isDateTypeByKey:function(e,t){var n=t.find((function(t){return t.name===e}));return!(!n||"DATE"!==n.dataType)},isTimeTypeByKey:function(e,t){var n=t.find((function(t){return t.name===e}));return!(!n||"TIME"!==n.dataType)},isNumberTypeByKey:function(e,t){var n=t.find((function(t){return t.name===e}));return!(!n||"TINYINT"!==n.dataType&&"SMALLINT"!==n.dataType&&"MEDIUMINT"!==n.dataType&&"INT"!==n.dataType&&"BIGINT"!==n.dataType)},isBoolTypeByKey:function(e,t){var n=t.find((function(t){return t.name===e}));return!(!n||"BOOL"!==n.dataType)},isAttachmentTypeByKey:function(e,t){var n=t.find((function(t){return t.name===e}));return!(!n||"ATTACHMENT"!==n.dataType)},togglePwd:function(e,t){console.info("togglePwd:"+e+","+t);var n=Object(A["a"])(!0,{},this.passwordMaps),a=n[t];a&&(a[e].isPwd=!a[e].isPwd),this.passwordMaps=n},getPlaceHolderByKey:function(e,t){var n=t.find((function(t){return t.name===e}));return n?n.placeHolder:null},getInputTextType:function(e,t){return this.passwordMaps[e.key]&&this.passwordMaps[e.key][t].isPwd?"password":"text"},getRefName:function(e,t,n){var a=e+t+this.getRecId(n);return console.log(a),a},isPasswordTextType:function(e,t){return!(!this.passwordMaps[e.key]||!this.passwordMaps[e.key][t].isPwd)},getInputIcon:function(e,t){return this.passwordMaps[e.key]&&this.passwordMaps[e.key][t].isPwd?"visibility_off":"visibility"},isExistCTableListEdit:function(e,t){console.log("isExistCTableListEdit");var n=this.getCTableListEditRecIds(e,t);return!!(n&&n.length>0)},getCTableListEditRecIds:function(e,t){if(e&&t){var n=e[this.getRecId(t)];return console.log("getCTableListEditRecIds: "+JSON.stringify(n)),n}return console.log("getCTableListEditRecIds empty"),[]},isExistCTableEdit:function(e,t){console.log("isExistCTableEdit");var n=this.getCTableEditRecId(e,t);return!!n},getCTableEditRecId:function(e,t){if(e&&t){var n=e[this.getRecId(t)];return console.log("getCTableEditRecId: "+n),n}return console.log("getCTableEditRecId empty"),null},addRow:function(){console.log("CTableListEdit-> addRow");var e=this.qTableData.length+1,t={isNewRow:!0};this.insertColumns.forEach((function(e){t[e.name]=e.value})),this.qTableData=[].concat(Le()(this.qTableData.slice(0,e)),[t],Le()(this.qTableData.slice(e)));var n=this.getRecIdByDataMap(t);this.passwordMaps[n]=Object(A["a"])(!0,{},this.passwordMap)},removeRow:function(e){var t=this;console.log("removeRow = "+e);var n=this.qTableData.findIndex((function(n){return t.getRecId(n)===e}));n>=0&&(this.qTableData=[].concat(Le()(this.qTableData.slice(0,n)),Le()(this.qTableData.slice(n+1)))),delete this.passwordMaps[e]},batchRemoveRow:function(e){var t=this;e.forEach((function(e){t.removeRow(e)}))},onNewClickAction:function(){this.addRow()},onDeleteClickAction:function(e){var t=this;return r()(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=[],t.selected.forEach((function(e){a.push(t.getRecId(e))})),console.info(JSON.stringify(a)),e?t.removeRow(t.getRecId(e)):(t.batchRemoveRow(a),t.selected=[]);case 4:case"end":return n.stop()}}),n)})))()},getData:function(){var e=this,t=[],n=this;return this.qTableData.forEach((function(a){var r={};for(var o in a){var i=a[o],s=e.relationMap[o];s?(r[s.name]=i,r[o]=i&&i[s.toColumn.name]):void 0!=i&&null!=i&&""!==i.toString().trim()&&(r[o]=i)}console.info(r),n.oneToOneMainToSubTables.forEach((function(t){var a="rTableNewOrEditRef"+t.relationName+e.getRecId(r);console.dir(a);var o=n.$refs[a];console.dir(o);var i=o[0].getData();r[t.relationName]=i})),n.oneToManySubTables.forEach((function(t){var a="rTableListRef"+t.relationName+e.getRecId(r);console.dir(a);var o=n.$refs[a];console.dir(o);var i=o[0].getData();r[t.relationName]=i})),r.isNewRow&&delete r.isNewRow,delete r.createdDate,delete r.lastModifiedDate,t.push(r)})),console.dir(t),t},hideRefPopProxyAction:function(e){console.info("hideRefPopProxyAction:"+this.$refs[e]);for(var t=this.$refs[e],n=0;n<t.length;n++)t[n].hide()},getRecId:function(e){if(1===this.primaryNames.length)return e[this.primaryNames[0]]||null;var t=[];this.primaryNames.forEach((function(n){t.push(n+"="+e[n])}));var n=t.join(",");return console.log(n),n},getRecIdByDataMap:function(e){var t=this.primaryNames;if(1===t.length)return e[t[0]];var n=[];t.forEach((function(t){n.push(t+"="+e[t])}));var a=n.join(",");return console.log(a),a},getRecIdByTableAndDataMap:function(e,t){var n=e.primaryNames;if(1===n.length)return t[n[0]];var a=[];n.forEach((function(e){a.push(e+"="+t[e])}));var r=a.join(",");return console.log(r),r},openDialogClickAction:function(e,t){var n=e.cols.find((function(e){return e.name===t})),a=e.row;this.$q.dialog({component:Ce,parent:this,tableName:n.relationTableName,data:a[t]}).onOk((function(e){a[t]=e})).onCancel((function(){console.log("Cancel")})).onDismiss((function(){console.log("Called on OK or Cancel")}))},loadMeta:function(){var e=this;return r()(regeneratorRuntime.mark((function t(){var n,a,o,i,s,u,l,c,p,f,d,m,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e,e.loading=!0,t.prev=2,t.next=5,W["e"].getByName(e.tableName);case 5:return a=t.sent,e.tableCaption=a.caption,e.primaryNames=a.primaryNames,t.next=10,W["c"].getByName(e.tableName);case 10:return o=t.sent,i={},t.next=14,Promise.all(o.map(function(){var e=r()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,W["e"].getByName(t.toTable.name);case 2:n=e.sent,i[t.toTable.name]=n;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 14:return e.relationMetadataMap=i,t.next=17,W["h"].listByIds(e.tableName,e.recIds);case 17:s=t.sent,console.dir(s),u={},l=[],c=[],o.forEach((function(e){if("OneToOneMainToSub"===e.relationType){var t={};s.forEach((function(r){if(r[e.name]){var o=n.getRecIdByTableAndDataMap(a,r),s=n.getRecIdByTableAndDataMap(i[e.toTable.name],r[e.name]);t[o]=s}})),console.info("OneToOneMainToSub recIdMap"+JSON.stringify(t)),l.push({relationName:e.name,tableName:e.toTable.name,fkColumnName:e.toColumn.name,recIdMap:t})}else if("OneToMany"===e.relationType){var r={};s.forEach((function(t){console.log("[1]recIdsMap->table:"+a.caption+t.name);var o=n.getRecIdByTableAndDataMap(a,t);console.log("[1]recIdsMap->mainRecId:"+o);var s=[];t[e.name]&&t[e.name].forEach((function(t){var a=n.getRecIdByTableAndDataMap(i[e.toTable.name],t);s.push(a),console.info("[1]recIdsMap->relationRecId:"+s)})),r[o]=s,console.info("[1]recIdsMap:"+JSON.stringify(r))})),c.push({relationName:e.name,tableName:e.toTable.name,fkColumnName:e.toColumn.name,recIdsMap:r})}else if("ManyToOne"===e.relationType||"OneToOneSubToMain"===e.relationType){var o=e.fromColumn.name;u[o]=e}})),e.oneToOneMainToSubTables=l,e.oneToManySubTables=c,e.relationMap=u,console.info("relationMap:"+JSON.stringify(e.relationMap)),p=[],f=function(t){var r=a.columns[t],o=r.name;if("FULLTEXT"===r.indexType)return"continue";"PASSWORD"===r.dataType?(r.isText=!1,r.isPwd=!0):(r.isText=!0,r.isPwd=!1);var u=null;u="true"===r.defaultValue||"false"!==r.defaultValue&&r.defaultValue,"DATE"===r.dataType&&u?r.value=tt["a"].dateFormat(u):"DATETIME"===r.dataType&&u?r.value=tt["a"].dateTimeFormat(u):"TIME"===r.dataType&&u?r.value=tt["a"].timeFormat(u):r.value=u,"DATE"===r.dataType?s.forEach((function(e){e[o]=tt["a"].dateFormat(e[o])})):"DATETIME"===r.dataType&&s.forEach((function(e){e[o]=tt["a"].dateTimeFormat(e[o])}));var l=e.relationMap[o];l?(r.relationTableName=l.toTable.name,r.relationColumnName=l.toColumn.name,r.relationDisplayColumns=n.getDisplayableColumns(i[r.relationTableName]),s.forEach((function(e){e[o]=e[l.name]})),p.push(r)):p.push(r)},d=0;case 30:if(!(d<a.columns.length)){t.next=37;break}if(m=f(d),"continue"!==m){t.next=34;break}return t.abrupt("continue",34);case 34:d++,t.next=30;break;case 37:e.insertColumns=p,console.info(e.insertColumns),h=[],h.push({name:"dataClickAction",align:"center",label:"操作",field:"dataClickAction",sortable:!0}),p.forEach((function(t){e.passwordMap[t.name]={isPwd:t.isPwd,isText:t.isText},h.push({name:t.name,align:"left",label:t.caption,field:t.name,dataType:t.dataType,sortable:!1,placeHolder:t.description,updatable:t.updatable,relationTableName:t.relationTableName,relationColumnName:t.relationColumnName,relationDisplayColumns:t.relationDisplayColumns,isPwd:t.isPwd,isText:t.isText})})),e.qTableColums=h,s.forEach((function(t){console.log(t);var n=e.getRecIdByDataMap(t);e.passwordMaps[n]=Object(A["a"])(!0,{},e.passwordMap)})),e.qTableData=s,console.dir(s),e.loading=!1,t.next=53;break;case 49:t.prev=49,t.t0=t["catch"](2),e.loading=!1,console.error(t.t0);case 53:case"end":return t.stop()}}),t,null,[[2,49]])})))()},getDisplayableColumns:function(e){var t=e.columns.filter((function(e){return!0===e.displayable}));return t}}},ft=pt,dt=(n("05ee"),Object(y["a"])(ft,lt,ct,!1,null,null,null)),mt=dt.exports;Y()(dt,"components",{QBanner:Ne["a"],QBtn:L["a"],QTable:Ke["a"],QTr:He["a"],QTd:je["a"],QCheckbox:Ue["a"],QInput:$["a"],QIcon:ie["a"],QPopupProxy:De["a"],QDate:_e["a"],QTime:Ie["a"],QToggle:re["a"],QSeparator:ze["a"]});var ht={install:function(e){e.component("CTableListEdit",mt)}},bt=ht,vt=function(){var e=r()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.Vue,n.use(bt);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),yt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("q-banner",{staticClass:"text-black bg-listcolor",attrs:{"inline-actions":""},scopedSlots:e._u([{key:"action",fn:function(){return[n("q-btn",{attrs:{disable:0==e.selected.length,unelevated:"",color:"negative",label:"批量删除"},on:{click:function(t){return e.onDeleteClickAction()}}}),n("p",{staticClass:"q-px-sm"}),n("q-btn",{attrs:{unelevated:"",color:"primary",label:"添加索引"},on:{click:function(t){return e.onNewClickAction()}}})]},proxy:!0}])}),n("q-table",{attrs:{data:e.table.indexs,columns:e.columns,pagination:e.tablePagination,"row-key":"id",selection:"multiple",selected:e.selected,loading:e.loading,flat:"",separator:"cell","hide-bottom":""},on:{"update:pagination":function(t){e.tablePagination=t},"update:selected":function(t){e.selected=t}},scopedSlots:e._u([{key:"body",fn:function(t){return[n("q-tr",{attrs:{props:t}},[n("q-td",[n("q-checkbox",{model:{value:t.selected,callback:function(n){e.$set(t,"selected",n)},expression:"props.selected"}})],1),n("q-td",{key:"dataClickAction",attrs:{props:t}},[n("q-btn",{attrs:{unelevated:"",color:"negative",label:"删除",flat:"",dense:""},on:{click:function(n){return e.onDeleteClickAction(t.row.id)}}})],1),n("q-td",{key:"caption",attrs:{props:t}},[n("q-input",{staticStyle:{width:"80px"},model:{value:t.row.caption,callback:function(n){e.$set(t.row,"caption",n)},expression:"props.row.caption"}})],1),n("q-td",{key:"name",attrs:{props:t}},[n("q-input",{staticStyle:{width:"120px"},model:{value:t.row.name,callback:function(n){e.$set(t.row,"name",n)},expression:"props.row.name"}})],1),n("q-td",{key:"indexType",attrs:{props:t}},[n("q-select",{attrs:{outlined:"",options:e.indexTypeOptions,"emit-value":"","map-options":""},model:{value:t.row.indexType,callback:function(n){e.$set(t.row,"indexType",n)},expression:"props.row.indexType"}})],1),n("q-td",{key:"indexStorage",attrs:{props:t}},[n("q-select",{attrs:{outlined:"",options:e.indexStorageOptions,"emit-value":"","map-options":""},model:{value:t.row.indexStorage,callback:function(n){e.$set(t.row,"indexStorage",n)},expression:"props.row.indexStorage"}})],1),n("q-td",{key:"columns",attrs:{props:t}},[n("q-select",{staticStyle:{"min-width":"150px"},attrs:{outlined:"",options:e.table.columns,multiple:"","option-label":"caption","option-value":"id"},model:{value:t.row.columns,callback:function(n){e.$set(t.row,"columns",n)},expression:"props.row.columns"}})],1),n("q-td",{key:"description",attrs:{props:t}},[n("q-input",{staticStyle:{width:"150px"},model:{value:t.row.description,callback:function(n){e.$set(t.row,"description",n)},expression:"props.row.description"}})],1),n("q-td",{key:"createdDate",attrs:{props:t}},[n("span",[e._v(e._s(e._f("dateTimeFormat")(t.row.createdDate)))])]),n("q-td",{key:"lastModifiedDate",attrs:{props:t}},[n("span",[e._v(e._s(e._f("dateTimeFormat")(t.row.lastModifiedDate)))])])],1)]}}])})],1)},gt=[],wt={name:"CIndexList",props:{value:{required:!0}},data:function(){return{selected:[],loading:!0,tablePagination:{rowsPerPage:9999},columns:[{name:"dataClickAction",align:"center",label:"操作",field:"dataClickAction",sortable:!0},{name:"caption",align:"left",label:"中文名称",field:"caption",sortable:!0},{name:"name",align:"left",label:"索引名称",field:"name",sortable:!0},{name:"indexType",align:"left",label:"索引类型",field:"indexType",sortable:!0},{name:"indexStorage",align:"left",label:"索引存储",field:"indexStorage",sortable:!0},{name:"columns",align:"left",label:"列",field:"columns",sortable:!0},{name:"description",align:"left",label:"描述",field:"description",sortable:!0},{name:"createdDate",align:"left",label:"创建时间",field:"createdDate",format:function(e){return"".concat(e)},sortable:!0},{name:"lastModifiedDate",align:"left",label:"修改时间",field:"lastModifiedDate",sortable:!0}],table:{},indexTypeOptions:[{value:"PRIMARY",label:"主键"},{value:"UNIQUE",label:"唯一"},{value:"INDEX",label:"普通"}],indexStorageOptions:[{value:"BTREE",label:"B树"},{value:"HASH",label:"哈希"}]}},created:function(){var e=this;return r()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.info("CIndexList component->created"),t.next=3,e.init();case 3:case"end":return t.stop()}}),t)})))()},mounted:function(){console.info("CIndexList component->mounted")},activated:function(){console.info("CIndexList component->activated")},deactivated:function(){console.info("CIndexList component->deactivated")},updated:function(){console.info("CIndexList component-updated")},destroyed:function(){console.info("CIndexList component->destroyed")},filters:{dateTimeFormat:function(e){return tt["a"].dateTimeFormat(e)}},methods:{init:function(){var e=this;return r()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.info("CIndexList component->init"),e.$store.commit("config/updateIsAllowBack",e.$route.meta.isAllowBack),t.next=4,e.loadData();case 4:case"end":return t.stop()}}),t)})))()},loadData:function(){var e=this;return r()(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{console.info("CIndexList component->loadData"),e.loading=!0,n=Object(A["a"])(!0,{},e.value),a=n.columns,n&&(n.indexs?n.indexs.forEach((function(e){var t=[];e.indexLines.forEach((function(e){t.push(a.find((function(t){return t.id===e.column.id})))})),e.columns=t})):n.indexs=[],e.table=n),e.loading=!1}catch(r){console.error(r),e.loading=!1,e.$q.notify(r)}case 1:case"end":return t.stop()}}),t)})))()},onNewClickAction:function(){this.addRow()},addRow:function(){var e=this.table.indexs||[],t=e.length+1,n={id:(new Date).valueOf(),indexStorage:null,indexType:null,name:"index"+e.length,caption:"索引"+e.length,description:"描述"+e.length,columns:[],isNewRow:!0};this.table.indexs=[].concat(Le()(e.slice(0,t)),[n],Le()(e.slice(t)))},removeRow:function(e){var t=this.table.indexs,n=t.findIndex((function(t){return t.id===e}));n>=0&&(this.table.indexs=[].concat(Le()(t.slice(0,n)),Le()(t.slice(n+1))))},batchRemoveRow:function(e){var t=this;e.forEach((function(e){t.removeRow(e)}))},onDeleteClickAction:function(e){var t=this;return r()(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=[],t.selected.forEach((function(e){a.push(e.id)})),console.info(JSON.stringify(a)),e?t.removeRow(e):(t.batchRemoveRow(a),t.selected=[]);case 4:case"end":return n.stop()}}),n)})))()},getData:function(){var e=[];this.table.indexs.forEach((function(t){var n=[];t.columns.forEach((function(e){n.push({column:{id:e.id,name:e.name}})}));var a={id:t.id,isNewRow:t.isNewRow,caption:t.caption,description:t.description,indexStorage:t.indexStorage,indexType:t.indexType,name:t.name,indexLines:n};e.push(a)}));var t={indexs:e};return t}}},Tt=wt,xt=(n("187d"),Object(y["a"])(Tt,yt,gt,!1,null,null,null)),kt=xt.exports;Y()(xt,"components",{QBanner:Ne["a"],QBtn:L["a"],QTable:Ke["a"],QTr:He["a"],QTd:je["a"],QCheckbox:Ue["a"],QInput:$["a"],QSelect:F["a"]});var Ct={install:function(e){e.component("CIndexList",kt)}},qt=Ct,Rt=function(){var e=r()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.Vue,n.use(qt);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Nt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"q-pb-md bg-white"},[n("div",{staticClass:"row justify-start items-baseline content-center items-center"},[n("div",{staticClass:"row justify-start items-baseline content-center items-center"},[n("div",{staticClass:"q-px-md"},[n("q-item-label",{staticClass:"query-cond"},[e._v("关键字:")])],1),n("div",{staticClass:"q-pt-md"},[n("q-input",{attrs:{outlined:"",placeholder:"请输入关键字"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onQueryClickAction.apply(null,arguments)}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)]),e._l(e.queryColumns,(function(t){return n("div",{key:t.name,staticClass:"row justify-start items-baseline content-center items-center"},[n("div",{staticClass:"q-px-md"},[n("q-item-label",{staticClass:"query-cond"},[e._v(e._s(t.label)+":")])],1),n("div",{staticClass:"q-pt-md"},[n("q-input",{attrs:{outlined:"",placeholder:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onQueryClickAction.apply(null,arguments)}},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1)])}))],2),n("div",{staticClass:"q-pt-md row justify-start items-center"},[n("div",{staticClass:"q-px-md"},[n("q-btn",{attrs:{unelevated:"",color:"primary",label:"查询"},on:{click:e.onQueryClickAction}})],1),n("div",{staticClass:"q-px-md"},[n("q-btn",{attrs:{unelevated:"",color:"grey",label:"重置"},on:{click:function(t){return e.onResetClickAction()}}})],1)])]),n("div",{staticClass:"bg-table-list"},[e.readOnly||e.table.readOnly?e._e():n("q-banner",{staticClass:"text-black bg-listcolor",attrs:{"inline-actions":""},scopedSlots:e._u([{key:"action",fn:function(){return[n("q-btn",{attrs:{unelevated:"",color:"negative",label:"批量删除"},on:{click:function(t){return e.onDeleteClickAction()}}}),n("p",{staticClass:"q-px-sm"}),n("q-btn",{attrs:{unelevated:"",color:"positive",label:"导出全部"},on:{click:function(t){return e.onExportClickAction()}}}),n("p",{staticClass:"q-px-sm"}),n("q-btn",{attrs:{unelevated:"",color:"purple",label:"批量导入"},on:{click:function(t){return e.onImportClickAction()}}}),n("p",{staticClass:"q-px-sm"}),n("q-btn",{attrs:{unelevated:"",color:"primary",label:"添加"},on:{click:function(t){return e.onNewClickAction()}}})]},proxy:!0}],null,!1,2969178993)}),n("q-table",{attrs:{data:e.data,columns:e.columns,"row-key":e.getRecId,selection:e.selection,selected:e.selected,"visible-columns":e.visibleColumns,pagination:e.tablePagination,loading:e.loading,"hide-bottom":"",flat:""},on:{"update:selected":function(t){e.selected=t},selection:e.onSelection,"update:pagination":function(t){e.tablePagination=t}},scopedSlots:e._u([{key:"body",fn:function(t){return[n("q-tr",{attrs:{props:t}},[n("q-td",[n("q-checkbox",{model:{value:t.selected,callback:function(n){e.$set(t,"selected",n)},expression:"props.selected"}})],1),e._l(t.row,(function(a,r,o){return n("q-td",{key:o},[r.indexOf("dataClickAction")>=0?n("div",[e.readOnly||e.table.readOnly?e._e():n("q-btn",{attrs:{unelevated:"",color:"negative",label:"删除",flat:"",dense:""},on:{click:function(n){return e.onDeleteClickAction(t.row)}}}),e.readOnly||e.table.readOnly?e._e():n("q-btn",{attrs:{unelevated:"",color:"primary",label:"编辑",flat:"",dense:""},on:{click:function(n){return e.onEditClickAction(t.row)}}})],1):e.isAttachmentTypeByKey(r,t.cols)?n("div",[n("a",{attrs:{target:"_blank",href:a}},[e._v("查看")])]):n("div",[e._v("\n              "+e._s(e._f("dataFormat")(a,r,t.cols))+"\n            ")])])}))],2)]}}])}),e.data.length>0?n("q-separator"):e._e(),n("div",{staticClass:"q-py-md"},[n("CPage",{on:{input:e.onRequestAction},model:{value:e.pagination,callback:function(t){e.pagination=t},expression:"pagination"}})],1)],1)])},Pt=[],Dt=(n("841c"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-dialog",{ref:"dialog",attrs:{persistent:""},on:{hide:e.onDialogHide}},[n("q-card",{staticClass:"q-dialog-plugin"},[n("div",{staticClass:"q-pa-md"},[n("div",{staticClass:"row items-baseline content-center justify-start"},[n("div",{staticClass:"col-10 text-right q-pr-md"},[e._v("文件已经生成，请点击下载！")]),n("div",{staticClass:"col-2"},[n("a",{attrs:{target:"_blank",href:e.url}},[e._v("立即下载")])])])]),n("q-card-actions",{attrs:{align:"center"}},[n("q-btn",{attrs:{color:"primary",label:"关闭",unelevated:"","no-caps":""},on:{click:e.onOKClick}})],1)],1)],1)}),_t=[],It={props:{url:{required:!0},data:{required:!1}},data:function(){return{}},methods:{show:function(){this.$refs.dialog.show()},hide:function(){this.$refs.dialog.hide()},onDialogHide:function(){this.$emit("hide")},onOKClick:function(){this.hide()}}},Mt=It,At=Object(y["a"])(Mt,Dt,_t,!1,null,null,null),St=At.exports;Y()(At,"components",{QDialog:we["a"],QCard:Te["a"],QCardActions:xe["a"],QBtn:L["a"]});var Et={name:"CTableListRead",props:{tableName:{required:!0},selectionProp:{required:!1},value:{required:!1},readOnly:{required:!1}},data:function(){return{data:[],table:{},tableCaption:"",primaryNames:[],listUrl:"",loading:!0,selected:[],selection:"multiple",search:"",queryColumns:[],pagination:{page:1,rowsPerPage:10,count:0},tablePagination:{rowsPerPage:10},visibleColumns:[],columns:[],relationMap:{}}},created:function(){var e=this;return r()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.init();case 2:return t.next=4,e.onRefresh();case 4:case"end":return t.stop()}}),t)})))()},mounted:function(){console.info("CTableListRead mounted")},activated:function(){console.info("CTableListRead activated")},deactivated:function(){console.info("CTableListRead deactivated")},updated:function(){console.info("CTableListRead updated")},destroyed:function(){console.info("CTableListRead destroyed")},beforeRouteUpdate:function(e,t,n){var a=this;return r()(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.info("CTableListRead beforeRouteUpdate"),e.next=3,a.init();case 3:return e.next=5,a.onRefresh();case 5:n();case 6:case"end":return e.stop()}}),e)})))()},filters:{dataFormat:function(e,t,n){var a=n.find((function(e){return e.name===t}));if(a){if(a.relationTableName){var r=e;if(e)if(a.relationDisplayColumns.length>0){var o=[];a.relationDisplayColumns.forEach((function(t){e[t.name]&&o.push(e[t.name])})),r=o.length>0?o.join("|"):e[a.relationColumnName]}else r=e[a.relationColumnName];return r||e}if("DATETIME"===a.dataType)return tt["a"].dateTimeFormat(e);if("DATE"===a.dataType)return tt["a"].dateFormat(e);if("TIME"===a.dataType)return tt["a"].timeFormat(e);if("BOOL"===a.dataType)return!0===e?"是":"否"}return e}},methods:{isAttachmentTypeByKey:function(e,t){var n=t.find((function(t){return t.name===e}));return!(!n||"ATTACHMENT"!==n.dataType)},onRefresh:function(){var e=this;return r()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.selected=[],t.next=3,e.fetchFromServer();case 3:case"end":return t.stop()}}),t)})))()},onRequestAction:function(e){this.tablePagination.rowsPerPage=e.rowsPerPage,this.fetchFromServer()},getQuery:function(){for(var e={},t=0;t<this.queryColumns.length;t++){var n=this.queryColumns[t];n.value&&""!==n.value.trim()&&(e[n.name]=n.value)}return e},onQueryClickAction:function(){this.onRefresh()},onResetClickAction:function(){this.search="";for(var e=0;e<this.queryColumns.length;e++)this.queryColumns[e].value="";this.onRefresh()},onNewClickAction:function(){this.$router.push("/business/"+this.tableName+"/new")},onEditClickAction:function(e){var t=this.getRecId(e);console.log(t),this.$router.push("/business/"+this.tableName+"/"+t)},onImportClickAction:function(){this.$router.push("/business/"+this.tableName+"/import")},getRecId:function(e){if(!e)return null;if(1===this.primaryNames.length)return e[this.primaryNames[0]];var t=[];this.primaryNames.forEach((function(n){t.push(n+"="+e[n])}));var n=t.join(",");return console.log(n),n},onSelection:function(e){var t=e.rows,n=e.added;e.evt;console.log("onSelection"),console.dir(t),console.dir(n),n?this.$emit("input",t[0]):this.$emit("input",null)},onDeleteClickAction:function(e){var t=this;return r()(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=[],t.selected.forEach((function(e){a.push(t.getRecId(e))}));try{t.$q.dialog({title:"删除",message:"确认删除吗？",ok:{unelevated:!0},cancel:{color:"negative",unelevated:!0},persistent:!1}).onOk(r()(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=5;break}return n.next=3,W["h"].delete(t.tableName,t.getRecId(e));case 3:n.next=7;break;case 5:return n.next=7,W["h"].batchDelete(t.tableName,a);case 7:t.$q.notify("删除成功"),t.onRefresh();case 9:case"end":return n.stop()}}),n)})))).onCancel((function(){})).onDismiss((function(){console.info("I am triggered on both OK and Cancel")}))}catch(o){console.error(o),t.$q.notify("删除失败")}case 3:case"end":return n.stop()}}),n)})))()},onExportClickAction:function(){var e=this;return r()(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$q.loading.show({message:"生成中"}),t.prev=1,n=e.getQuery(),t.next=5,W["h"].export(e.tableName,e.search,n);case 5:a=t.sent,e.$q.dialog({component:St,parent:e,url:a,data:{}}).onOk((function(e){item.value=e})).onCancel((function(){console.log("Cancel")})).onDismiss((function(){console.log("Called on OK or Cancel")})),e.$q.loading.hide(),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](1),e.$q.loading.hide(),console.error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))()},fetchFromServer:function(){var e=this;return r()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,e.data=[],t.prev=2,t.delegateYield(regeneratorRuntime.mark((function t(){var n,a,r,o,i,s,u,l,c,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.getQuery(),t.next=3,W["h"].count(e.tableName,e.search,n);case 3:return e.pagination.count=t.sent,t.next=6,W["h"].list(e.tableName,e.pagination.page,e.pagination.rowsPerPage,e.search,n);case 6:for(a=t.sent,r=[],o=e.relationMap,i=function(t){var n=a[t],i={};e.columns.forEach((function(e,t,a){var r=e.name,s=o[r];i[r]=s?n[s.name]:n[r]})),r.push(i)},s=0;s<a.length;s++)i(s);for(e.data=r,u=e.getRecId(e.value),console.log(u),l=[],c=0;c<e.data.length;c++)p=e.getRecId(e.data[c]),u===p&&l.push(e.data[c]);e.selected=l,e.loading=!1;case 18:case"end":return t.stop()}}),t)}))(),"t0",4);case 4:t.next=10;break;case 6:t.prev=6,t.t1=t["catch"](2),e.loading=!1,console.error(t.t1);case 10:case"end":return t.stop()}}),t,null,[[2,6]])})))()},init:function(){var e=this;return r()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.info("init"),e.$store.commit("config/updateIsAllowBack",e.$route.meta.isAllowBack),e.selection=e.selectionProp||"multiple",e.columns=[],e.visibleColumns=[],e.pagination={page:1,rowsPerPage:10,count:0},e.search="",t.next=9,e.loadMeta();case 9:case"end":return t.stop()}}),t)})))()},loadMeta:function(){var e=this;return r()(regeneratorRuntime.mark((function t(){var n,a,o,i,s,u,l,c,p,f,d,m,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e,e.loading=!0,t.prev=2,t.next=5,W["e"].getByName(e.tableName);case 5:return a=t.sent,e.table=a,e.tableCaption=a.caption,e.primaryNames=a.primaryNames,t.next=11,W["c"].getByName(e.tableName);case 11:return o=t.sent,i={},t.next=15,Promise.all(o.map(function(){var e=r()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,W["e"].getByName(t.toTable.name);case 2:n=e.sent,i[t.toTable.name]=n;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 15:return e.relationMetadataMap=i,s={},t.next=19,Promise.all(o.map(function(){var e=r()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:"ManyToOne"!==t.relationType&&"OneToOneSubToMain"!==t.relationType||(n=t.fromColumn.name,s[n]=t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 19:for(e.relationMap=s,u=[{name:"dataClickAction",align:"center",label:"操作",field:"dataClickAction",sortable:!0}],l=[],c=[],p=0;p<a.columns.length;p++)f=a.columns[p],d=f.name,"FULLTEXT"!==f.indexType&&"PASSWORD"!==f.dataType&&(m=e.relationMap[d],m&&(f.relationTableName=m.toTable.name,f.relationColumnName=m.toColumn.name,f.relationDisplayColumns=n.getDisplayableColumns(i[f.relationTableName])),h={name:f.name,align:"left",label:f.caption,field:f.name,dataType:f.dataType,sortable:!0,relationTableName:f.relationTableName,relationColumnName:f.relationColumnName,relationDisplayColumns:f.relationDisplayColumns},u.push(h),l.push(f.name),f.queryable&&c.push({name:f.name,label:f.caption,value:""}));l.push("dataClickAction"),e.columns=u,e.visibleColumns=l,e.queryColumns=c,e.loading=!1,t.next=35;break;case 31:t.prev=31,t.t0=t["catch"](2),e.loading=!1,console.error(t.t0);case 35:case"end":return t.stop()}}),t,null,[[2,31]])})))()},getDisplayableColumns:function(e){var t=e.columns.filter((function(e){return!0===e.displayable}));return t}}},Bt=Et,Ot=(n("a064"),Object(y["a"])(Bt,Nt,Pt,!1,null,null,null)),Ft=Ot.exports;Y()(Ot,"components",{QItemLabel:B["a"],QInput:$["a"],QBtn:L["a"],QBanner:Ne["a"],QTable:Ke["a"],QTr:He["a"],QTd:je["a"],QCheckbox:Ue["a"],QSeparator:ze["a"]});var $t={install:function(e){e.component("CTableListRead",Ft)}},Lt=$t,Qt=function(){var e=r()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.Vue,n.use(Lt);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Yt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("pre",[e._v(e._s(e.valueString))])])},Kt=[],Ht={name:"CRawDisplayer",title:{required:!0,type:String},value:{required:!0}},jt={props:Ht,computed:{valueString:function(){return JSON.stringify(this.value,null,2)}}},Ut=jt,zt=(n("79e3"),Object(y["a"])(Ut,Yt,Kt,!1,null,"87f9b530",null)),Vt=zt.exports,Jt={install:function(e){e.component("CRawDisplayer",Vt)}},Xt=Jt,Gt=function(){var e=r()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.Vue,n.use(Xt);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Wt="/crudapi/",Zt=/\/\//,en=function(e){return(Wt+e).replace(Zt,"/")};function tn(){return nn.apply(this,arguments)}function nn(){return nn=r()(regeneratorRuntime.mark((function e(){var t,n,a,r,i,s,u,l,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:t=e.sent,n=t.app,a=t.store,r=t.router,i=!1,s=function(e){i=!0;var t=Object(e)===e?en(r.resolve(e).route.fullPath):e;window.location.href=t},u=window.location.href.replace(window.location.origin,""),l=[D,_["default"],z,de,Be,We,ut,vt,Rt,Qt,Gt],c=0;case 11:if(!(!1===i&&c<l.length)){e.next=29;break}if("function"===typeof l[c]){e.next=14;break}return e.abrupt("continue",26);case 14:return e.prev=14,e.next=17,l[c]({app:n,router:r,store:a,Vue:o["a"],ssrContext:null,redirect:s,urlPath:u,publicPath:Wt});case 17:e.next=26;break;case 19:if(e.prev=19,e.t0=e["catch"](14),!e.t0||!e.t0.url){e.next=24;break}return window.location.href=e.t0.url,e.abrupt("return");case 24:return console.error("[Quasar] boot error:",e.t0),e.abrupt("return");case 26:c++,e.next=11;break;case 29:if(!0!==i){e.next=31;break}return e.abrupt("return");case 31:new o["a"](n);case 32:case"end":return e.stop()}}),e,null,[[14,19]])}))),nn.apply(this,arguments)}tn()},"3ce4":function(e,t,n){"use strict";n("ed71")},"427e":function(e,t){},4360:function(e,t,n){"use strict";var a={};n.r(a),n.d(a,"updateIsAllowBack",(function(){return c}));var r={};n.r(r),n.d(r,"updateToken",(function(){return b})),n.d(r,"updateUserInfo",(function(){return v}));var o={};n.r(o),n.d(o,"login",(function(){return y})),n.d(o,"logout",(function(){return g})),n.d(o,"getUserInfo",(function(){return w}));var i=n("2b0e"),s=n("2f62"),u={isAllowBack:!1},l=n("07bf"),c=function(e,t){e.isAllowBack=t},p=n("427e"),f={namespaced:!0,state:u,getters:l,mutations:a,actions:p},d=n("8e44"),m={token:d["a"].getToken(),userInfo:{username:"",realname:"",avatar:"",authorities:[],roles:""}},h=n("6ca7"),b=function(e,t){e.token=t},v=function(e,t){e.userInfo=t},y=(n("d3b7"),n("e6cf"),n("c740"),n("a79d"),function(e,t){var n=e.commit;return new Promise((function(e,a){d["i"].login(t).then((function(t){n("updateToken",t.principal.username);var a={username:t.principal.username,realname:t.principal.realname||t.principal.username,avatar:"",authorities:t.principal.authorities||[],roles:t.principal.roles||[]};n("updateUserInfo",a);var r=t.authorities||[],o=!1;r.findIndex((function(e){return"ROLE_SUPER_ADMIN"===e.authority}))>=0&&(o=!0),d["f"].set({permissions:r,isSuperAdmin:o}),e(a)})).catch((function(e){a(e)}))}))}),g=function(e){var t=e.commit;return new Promise((function(e,n){d["i"].logout().then((function(){e()})).catch((function(t){console.error(t),e()})).finally((function(){t("updateToken",""),t("updateUserInfo",{username:"",realname:"",avatar:"",authorities:[],roles:[]}),d["f"].set({permissions:[],isSuperAdmin:!1})}))}))},w=function(e){var t=e.commit;return new Promise((function(e,n){d["i"].getUserInfo().then((function(n){t("updateUserInfo",n),e()})).catch((function(e){n(e)}))}))},T=function(e){e.subscribe((function(e){"user/updateToken"===e.type?d["a"].setToken(e.payload):"user/updateUserInfo"===e.type&&d["i"].setUserInfo(e.payload)}))},x={namespaced:!0,state:m,getters:h,mutations:r,actions:o};i["a"].use(s["a"]);var k=new s["a"].Store({modules:{config:f,user:x},plugins:[T],strict:!1});t["a"]=k},"4d3d":function(e,t,n){"use strict";n("5d21")},"55af":function(e,t,n){"use strict";n("a6f2")},"5d21":function(e,t,n){},"6bef":function(e,t,n){},"6ca7":function(e,t){},"758b":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p}));n("e9c4"),n("d3b7"),n("e6cf");var a=n("2b0e"),r=n("bc3a"),o=n.n(r),i=n("2a19"),s=n("4328"),u=n.n(s),l=n("a18c"),c=n("8e44");a["a"].prototype.$axios=o.a;var p=o.a.create({baseURL:e.env.API});function f(){setTimeout((function(){l["a"].push({path:"/login"})}),1e3)}p.defaults.transformRequest=[function(e,t){var n=t["Content-Type"]||t["content-type"];return n||(n="application/json",t["Content-Type"]="application/json"),n.indexOf("multipart/form-data")>=0?e:n.indexOf("application/x-www-form-urlencoded")>=0?u.a.stringify(e):JSON.stringify(e)}],p.interceptors.request.use((function(e){if(e.permission&&!c["f"].check(e.permission))throw{message:"403 forbidden"};return e}),(function(e){return Promise.reject(e)})),p.interceptors.response.use((function(e){return e}),(function(e){return e.response?401===e.response.status?(i["a"].create({message:e.response.data.message,type:"negative"}),f()):e.response.data&&e.response.data.message?i["a"].create({message:e.response.data.message,type:"negative"}):i["a"].create({message:e.response.statusText||e.response.status,type:"negative"}):e.message.indexOf("timeout")>-1?i["a"].create({message:"Network timeout",type:"negative"}):e.message?i["a"].create({message:e.message,type:"negative"}):i["a"].create({message:"http request error",type:"negative"}),Promise.reject(e)})),a["a"].prototype.$axios=p}).call(this,n("4362"))},"79e3":function(e,t,n){"use strict";n("1856")},"7e6d":function(e,t,n){},"81ae":function(e,t,n){},"8e44":function(e,t,n){"use strict";n.d(t,"g",(function(){return o})),n.d(t,"i",(function(){return T})),n.d(t,"f",(function(){return x})),n.d(t,"a",(function(){return k})),n.d(t,"e",(function(){return C})),n.d(t,"d",(function(){return q})),n.d(t,"c",(function(){return R})),n.d(t,"h",(function(){return N})),n.d(t,"b",(function(){return P}));var a=n("18d6"),r=n("a639"),o={clear:function(){a["a"].clear(),r["a"].clear()}},i=n("c973"),s=n.n(i),u=(n("96cf"),n("758b")),l={"Content-Type":"application/x-www-form-urlencoded"},c={login:function(e){return u["a"].post("/api/auth/login",e,{headers:l})},logout:function(){return u["a"].get("/api/auth/logout",{headers:l})}},p=n("ded3"),f=n.n(p),d={"Content-Type":"multipart/form-data"},m={create:function(e){return u["a"].post("/api/metadata/tables",e)},update:function(e,t){return u["a"].patch("/api/metadata/tables/"+e,t)},list:function(e,t,n,a){return e||(e=1),t||(t=10),u["a"].get("/api/metadata/tables",{params:f()({offset:(e-1)*t,limit:t,search:n},a)})},count:function(e,t){return u["a"].get("/api/metadata/tables/count",{params:f()({search:e},t)})},get:function(e){return u["a"].get("/api/metadata/tables/"+e,{params:{}})},getByName:function(e){return u["a"].get("/api/metadata/tables/name/"+e,{params:{}})},getMetadata:function(e){return u["a"].get("/api/metadata/tables/metadatas/"+e,{params:{}})},getMetadatas:function(){return u["a"].get("/api/metadata/tables/metadatas",{params:{}})},reverse:function(e){return u["a"].post("/api/metadata/tables/metadatas/reverse/"+e)},batchReverse:function(e){return u["a"].post("/api/metadata/tables/metadatas/reverse",e)},repairMeataData:function(e,t){return u["a"].patch("/api/metadata/tables/metadata/"+e,t)},delete:function(e,t){return u["a"].delete("/api/metadata/tables/"+e,{params:{isDropPhysicalTable:t}})},batchDelete:function(e,t){return u["a"].delete("/api/metadata/tables",{data:e,params:{isDropPhysicalTable:t}})},import:function(){var e=s()(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",u["a"].post("/api/metadata/tables/import",t,{headers:d,onUploadProgress:function(e){n&&n(e)}}));case 1:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),export:function(e){return u["a"].post("/api/metadata/tables/export",e)}},h={create:function(e){return u["a"].post("/api/metadata/sequences",e)},update:function(e,t){return u["a"].patch("/api/metadata/sequences/"+e,t)},list:function(e,t,n,a){return e||(e=1),t||(t=10),u["a"].get("/api/metadata/sequences",{params:f()({offset:(e-1)*t,limit:t,search:n},a)})},count:function(e,t){return u["a"].get("/api/metadata/sequences/count",{params:f()({search:e},t)})},get:function(e){return u["a"].get("/api/metadata/sequences/"+e,{params:{}})},delete:function(e){return u["a"].delete("/api/metadata/sequences/"+e)},batchDelete:function(e){return u["a"].delete("/api/metadata/sequences",{data:e})}},b={create:function(e){return u["a"].post("/api/metadata/tablerelations",e)},update:function(e,t){return u["a"].patch("/api/metadata/tablerelations/"+e,t)},list:function(e,t,n,a){return e||(e=1),t||(t=999),u["a"].get("/api/metadata/tablerelations",{params:f()({offset:(e-1)*t,limit:t,search:n},a)})},count:function(e,t){return u["a"].get("/api/metadata/tablerelations/count",{params:f()({search:e},t)})},get:function(e){return u["a"].get("/api/metadata/tablerelations/"+e,{params:{}})},getFromTableById:function(e){return u["a"].get("/api/metadata/tablerelations/fromTable/"+e,{params:{}})},getFromTableByName:function(e){return u["a"].get("/api/metadata/tablerelations/fromTable/name/"+e,{params:{}})},delete:function(e){return u["a"].delete("/api/metadata/tablerelations/"+e)},batchDelete:function(e){return u["a"].delete("/api/metadata/tablerelations",{data:e})}},v={"Content-Type":"multipart/form-data"},y={upload:function(){var e=s()(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("file->upload"),e.abrupt("return",u["a"].post("/api/file",t,{headers:v,onUploadProgress:function(e){n&&n(e)}}));case 2:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),bigUpload:function(){var e=s()(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("file->bigUpload"),e.abrupt("return",u["a"].post("/api/file/big",t,{headers:v,onUploadProgress:function(e){n&&n(e)}}));case 2:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},g=(n("e9c4"),{"Content-Type":"multipart/form-data"}),w={create:function(e,t){return u["a"].post("/api/business/"+e,t)},update:function(e,t,n){return u["a"].patch("/api/business/"+e+"/"+t,n)},list:function(e,t,n,a,r,o){var i;if(t||(t=1),n||(n=10),o){var s=JSON.stringify(o);i=encodeURIComponent(s)}return u["a"].get("/api/business/"+e,{params:f()(f()({offset:(t-1)*n,limit:n,search:a},r),{},{filter:i})})},listAllByIds:function(e,t){return u["a"].post("/api/business/"+e+"/all",t,{params:{}})},count:function(e,t,n){return u["a"].get("/api/business/"+e+"/count",{params:f()({search:t},n)})},get:function(e,t){return u["a"].get("/api/business/"+e+"/"+t,{params:{}})},delete:function(e,t){return u["a"].delete("/api/business/"+e+"/"+t)},batchDelete:function(e,t){return u["a"].delete("/api/business/"+e,{data:t})},import:function(){var e=s()(regeneratorRuntime.mark((function e(t,n,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("table->import"),console.log(n),e.abrupt("return",u["a"].post("/api/business/"+t+"/import",n,{headers:g,onUploadProgress:function(e){a&&a(e)}}));case 3:case"end":return e.stop()}}),e)})));function t(t,n,a){return e.apply(this,arguments)}return t}(),getImportTemplate:function(e){return u["a"].get("/api/business/"+e+"/import/template",{params:{}})},export:function(e,t,n){return u["a"].get("/api/business/"+e+"/export",{params:f()({search:t},n)})}},T={login:function(){var e=s()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.login(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),logout:function(){var e=s()(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.logout();case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),getUserInfo:function(){var e=s()(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",a["a"].getItem("userInfo")||{});case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),setUserInfo:function(e){a["a"].set("userInfo",e)}},x=(n("d3b7"),{get:function(){return a["a"].getItem("permission")},set:function(e){a["a"].set("permission",e)},check:function(e){if(e&&e.length>0){var t=this.get();if(!t)return!1;var n=t.isSuperAdmin;if(n)return!0;if(!t.permissions)return!1;var a=t.permissions,r=a.some((function(t){return e.indexOf(t.authority)>-1}));return r}return!0}}),k={getToken:function(){return a["a"].getItem("token")},setToken:function(e){a["a"].set("token",e)}},C={create:function(){var e=s()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.create(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),update:function(){var e=s()(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.update(t,n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),list:function(){var e=s()(regeneratorRuntime.mark((function e(t,n,a,r){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.list(t,n,a,r);case 2:return o=e.sent,e.abrupt("return",o.data);case 4:case"end":return e.stop()}}),e)})));function t(t,n,a,r){return e.apply(this,arguments)}return t}(),count:function(){var e=s()(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.count(t,n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),get:function(){var e=s()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.get(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getByName:function(){var e=s()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.getByName(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getMetadata:function(){var e=s()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.getMetadata(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getMetadatas:function(){var e=s()(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.getMetadatas(name);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),reverse:function(){var e=s()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.reverse(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),batchReverse:function(){var e=s()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.batchReverse(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),repairMeataData:function(){var e=s()(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.repairMeataData(t,n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),delete:function(){var e=s()(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.delete(t,n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),batchDelete:function(){var e=s()(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.batchDelete(t,n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),import:function(){var e=s()(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",m.import(t,n).then((function(e){return console.log(e),e.data})));case 1:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),export:function(){var e=s()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.export(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},q={create:function(){var e=s()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h.create(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),update:function(){var e=s()(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h.update(t,n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),list:function(){var e=s()(regeneratorRuntime.mark((function e(t,n,a,r){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h.list(t,n,a,r);case 2:return o=e.sent,e.abrupt("return",o.data);case 4:case"end":return e.stop()}}),e)})));function t(t,n,a,r){return e.apply(this,arguments)}return t}(),count:function(){var e=s()(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h.count(t,n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),get:function(){var e=s()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h.get(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),delete:function(){var e=s()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h.delete(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),batchDelete:function(){var e=s()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h.batchDelete(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},R={create:function(){var e=s()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b.create(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),update:function(){var e=s()(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b.update(t,n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),list:function(){var e=s()(regeneratorRuntime.mark((function e(t,n,a,r){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b.list(t,n,a,r);case 2:return o=e.sent,e.abrupt("return",o.data);case 4:case"end":return e.stop()}}),e)})));function t(t,n,a,r){return e.apply(this,arguments)}return t}(),count:function(){var e=s()(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b.count(t,n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),get:function(){var e=s()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b.get(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getByName:function(){var e=s()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b.getFromTableByName(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),delete:function(){var e=s()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b.delete(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),batchDelete:function(){var e=s()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b.batchDelete(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},N={create:function(){var e=s()(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,w.create(t,n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),update:function(){var e=s()(regeneratorRuntime.mark((function e(t,n,a){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,w.update(t,n,a);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));function t(t,n,a){return e.apply(this,arguments)}return t}(),count:function(){var e=s()(regeneratorRuntime.mark((function e(t,n,a){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,w.count(t,n,a);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));function t(t,n,a){return e.apply(this,arguments)}return t}(),list:function(){var e=s()(regeneratorRuntime.mark((function e(t,n,a,r,o,i){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,w.list(t,n,a,r,o,i);case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}}),e)})));function t(t,n,a,r,o,i){return e.apply(this,arguments)}return t}(),listByIds:function(){var e=s()(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,w.listAllByIds(t,n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),get:function(){var e=s()(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,w.get(t,n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),delete:function(){var e=s()(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,w.delete(t,n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),batchDelete:function(){var e=s()(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,w.batchDelete(t,n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),import:function(){var e=s()(regeneratorRuntime.mark((function e(t,n,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",w.import(t,n,a).then((function(e){return console.log(e),e.data})));case 1:case"end":return e.stop()}}),e)})));function t(t,n,a){return e.apply(this,arguments)}return t}(),getImportTemplate:function(){var e=s()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,w.getImportTemplate(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),export:function(){var e=s()(regeneratorRuntime.mark((function e(t,n,a){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,w.export(t,n,a);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));function t(t,n,a){return e.apply(this,arguments)}return t}()},P={upload:function(){var e=s()(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",y.upload(t,n).then((function(e){return console.log(e),e.data})));case 1:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),bigUpload:function(){var e=s()(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",y.bigUpload(t,n).then((function(e){return console.log(e),e.data})));case 1:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()}},a064:function(e,t,n){"use strict";n("e9c7")},a18c:function(e,t,n){"use strict";var a=n("c973"),r=n.n(a),o=(n("96cf"),n("2b0e")),i=n("8c4f"),s=(n("e260"),n("d3b7"),n("e6cf"),n("3ca3"),n("ddb0"),[{path:"/login",name:"login",component:function(){return n.e(4).then(n.bind(null,"013f"))}},{path:"/403",name:"403",component:function(){return n.e(16).then(n.bind(null,"385d"))}},{path:"/",component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"713b"))},children:[{path:"",component:function(){return n.e(3).then(n.bind(null,"8b24"))}},{name:"about",path:"about",meta:{isAllowBack:!0},component:function(){return n.e(15).then(n.bind(null,"a1d1"))}},{name:"setting",path:"setting",meta:{isAllowBack:!0},component:function(){return n.e(18).then(n.bind(null,"0619"))}},{name:"form-builder",path:"metadata/tables/:id/formBuilder",meta:{isAllowBack:!0},component:function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,"63c2"))}},{name:"sequenceList",path:"metadata/sequences",meta:{isAllowBack:!0},component:function(){return Promise.all([n.e(0),n.e(23)]).then(n.bind(null,"4f99"))}},{name:"sequenceNew",path:"metadata/sequences/new",meta:{isAllowBack:!0},component:function(){return Promise.all([n.e(0),n.e(11)]).then(n.bind(null,"0312"))}},{name:"sequenceEdit",path:"metadata/sequences/:id",meta:{isAllowBack:!0},component:function(){return Promise.all([n.e(0),n.e(10)]).then(n.bind(null,"4342"))}},{name:"tables",path:"metadata/tables",meta:{isAllowBack:!0},component:function(){return Promise.all([n.e(0),n.e(25)]).then(n.bind(null,"4b85"))}},{name:"tableImport",path:"metadata/tables/import",meta:{isAllowBack:!0},component:function(){return Promise.all([n.e(0),n.e(24)]).then(n.bind(null,"c02e"))}},{name:"tableReverse",path:"metadata/tables/reverse",meta:{isAllowBack:!0},component:function(){return Promise.all([n.e(0),n.e(26)]).then(n.bind(null,"b57a"))}},{name:"tableNew",path:"metadata/tables/new",meta:{isAllowBack:!0},component:function(){return Promise.all([n.e(0),n.e(14)]).then(n.bind(null,"3799"))}},{name:"tableEdit",path:"metadata/tables/:id",meta:{isAllowBack:!0},component:function(){return Promise.all([n.e(0),n.e(12)]).then(n.bind(null,"83bb"))}},{name:"tableIndexs",path:"metadata/tables/:id/indexs",meta:{isAllowBack:!0},component:function(){return Promise.all([n.e(0),n.e(13)]).then(n.bind(null,"1e40"))}},{name:"relationGraph",path:"metadata/relations/graph",meta:{isAllowBack:!0},component:function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,"005a"))}},{name:"relations",path:"metadata/relations",meta:{isAllowBack:!0},component:function(){return Promise.all([n.e(0),n.e(8)]).then(n.bind(null,"f39d"))}},{name:"relationNew",path:"metadata/relations/new",meta:{isAllowBack:!0},component:function(){return Promise.all([n.e(0),n.e(9)]).then(n.bind(null,"022c"))}},{name:"relationEdit",path:"metadata/relations/:id",meta:{isAllowBack:!0},component:function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,"b565"))}},{name:"business",path:"business/:tableName",meta:{isAllowBack:!0},component:function(){return Promise.all([n.e(0),n.e(21)]).then(n.bind(null,"0262"))}},{name:"businessNew",path:"business/:tableName/new",meta:{isAllowBack:!0},component:function(){return Promise.all([n.e(0),n.e(22)]).then(n.bind(null,"fd80"))}},{name:"businessImport",path:"business/:tableName/import",meta:{isAllowBack:!0},component:function(){return Promise.all([n.e(0),n.e(20)]).then(n.bind(null,"f45f"))}},{name:"businessEdit",path:"business/:tableName/:recId",meta:{isAllowBack:!0},component:function(){return Promise.all([n.e(0),n.e(19)]).then(n.bind(null,"0a8a"))}}]},{path:"*",component:function(){return n.e(17).then(n.bind(null,"e51e"))}}]),u=s,l=n("8e44"),c=n("4360");o["a"].use(i["a"]);var p=new i["a"]({scrollBehavior:function(){return{x:0,y:0}},routes:u,mode:"history",base:"/crudapi/"}),f=["/login","/403"];function d(e){return f.indexOf(e.path),!0}p.beforeEach(function(){var e=r()(regeneratorRuntime.mark((function e(t,n,a){var r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("demo.crudapi.cn"===window.location.hostname&&_hmt&&t.path&&(_hmt.push(["_trackPageview",t.fullPath]),console.log("上报百度统计",t.fullPath)),r=l["a"].getToken(),!r){e.next=19;break}if(o=c["a"].state.user.userInfo,o.username){e.next=16;break}return e.prev=5,e.next=8,c["a"].dispatch("user/getUserInfo");case 8:a(),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](5),-1!==f.indexOf(t.path)?a():a("/login");case 14:e.next=17;break;case 16:d(t)?a():a({path:"/403",replace:!0});case 17:e.next=20;break;case 19:-1!==f.indexOf(t.path)?a():a("/login");case 20:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t,n,a){return e.apply(this,arguments)}}());t["a"]=p},a6f2:function(e,t,n){},be59:function(e,t,n){"use strict";n("6bef")},d874:function(e,t,n){},e9c7:function(e,t,n){},ed08:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n("bd4c"),r="YYYY-MM-DD HH:mm:ss",o="YYYY-MM-DD",i="HH:mm:ss";function s(e){return a["b"].formatDate(e,r)}function u(e){return a["b"].formatDate(e,o)}function l(e){return a["b"].formatDate(e,i)}function c(){return this.covertToQDateTime(Date.now())}function p(e){if(!e)return"";var t=this.covertToQDateTime(new Date(e));return t}function f(e){if(!e)return"";var t=this.covertToQTime(new Date(e));return t}function d(e){if(!e)return"";var t=this.covertToQDate(new Date(e));return t}var m={covertToQDateTime:s,covertToQDate:u,covertToQTime:l,getToday:c,dateTimeFormat:p,dateFormat:d,timeFormat:f}},ed71:function(e,t,n){}});