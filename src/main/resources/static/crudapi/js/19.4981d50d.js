(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{"0a8a":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-pa-md q-gutter-sm bg-page"},[a("q-breadcrumbs",[a("q-breadcrumbs-el",{attrs:{label:e.tableCaption,clickable:"",to:e.listUrl}}),a("q-breadcrumbs-el",{attrs:{label:"编辑"}})],1),a("q-separator"),a("div",{staticClass:"q-py-md bg-white"},[a("CTableEdit",{ref:"rTableEditRef",attrs:{recId:e.recId,tableName:e.tableName}}),a("div",{staticClass:"row justify-center q-py-md"},[a("q-btn",{attrs:{unelevated:"",color:"primary",label:"保存"},on:{click:e.onSubmit}})],1)],1)],1)},n=[],i=a("c973"),o=a.n(i),c=(a("b0c0"),a("96cf"),a("8e44")),u=a("ed08"),s={name:"PageTableEdit",data:function(){return{listUrl:"",tableName:"",tableCaption:"",oldData:{},recId:null}},created:function(){var e=this;return o()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.init();case 2:case"end":return t.stop()}}),t)})))()},mounted:function(){},activated:function(){},deactivated:function(){},updated:function(){},destroyed:function(){},beforeRouteUpdate:function(e,t,a){var r=this;return o()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.info("beforeRouteUpdate"),t.next=3,r.init(e.params.tableName,e.params.recId);case 3:a();case 4:case"end":return t.stop()}}),t)})))()},filters:{dateTimeFormat:function(e){return u["a"].dateTimeFormat(e)},dateFormat:function(e){return u["a"].dateFormat(e)},dataFormat:function(e){return e&&e.name?e.name:e}},methods:{init:function(e,t){var a=this;return o()(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a.$store.commit("config/updateIsAllowBack",a.$route.meta.isAllowBack),a.tableName=e||a.$route.params.tableName,a.recId=t||a.$route.params.recId,r.next=5,a.loadMeta();case 5:case"end":return r.stop()}}),r)})))()},onSubmit:function(){var e=this;return o()(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$q.loading.show({message:"提交中"}),a=e.$refs.rTableEditRef.getData(),t.prev=2,t.next=5,c["h"].update(e.tableName,e.recId,a);case 5:e.$q.loading.hide(),e.$q.notify("修改成功"),e.$router.go(-1),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](2),e.$q.loading.hide(),console.info(t.t0);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})))()},loadMeta:function(){var e=this;return o()(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,c["e"].getByName(e.tableName);case 4:a=t.sent,e.tableCaption=a.caption,e.listUrl="/business/"+e.tableName,e.loading=!1,t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](1),e.loading=!1,console.error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))()}}},l=s,d=a("2877"),m=a("ead5"),p=a("079e"),b=a("eb85"),f=a("9c40"),g=a("eebe"),w=a.n(g),h=Object(d["a"])(l,r,n,!1,null,null,null);t["default"]=h.exports;w()(h,"components",{QBreadcrumbs:m["a"],QBreadcrumbsEl:p["a"],QSeparator:b["a"],QBtn:f["a"]})}}]);